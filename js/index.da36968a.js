import{D,g as V}from"./DataFormDialog.c64627b5.js";import{_ as C}from"./index.92b6fe80.js";import{ag as l,o as k,c as S,P as e,H as n,K as c,a as u,M as _,aq as R,a5 as z,I as E,L as O}from"./vendor-vue.5e429edb.js";import"./element-plus.af1c8bed.js";import"./element-icon.65c0b9c3.js";import"./vendor-lib.cd48dffd.js";const x={name:"",components:{DataFormDialog:D},props:{list:{type:Array}},computed:{},data(){return{currentRow:null,dialogVisible:!1}},methods:{handleEditRow(s){this.currentRow=s,this.dialogVisible=!0},async handleDeleteClick(s){let t={host_id:s.id};const i=await this.$http.deleteHostById(t);i.code==0?(this.$msg.success("\u64CD\u4F5C\u6210\u529F"),this.$emit("on-success")):this.$msg.error(i.msg)},async handleStatusChange(s){let t={id:s.id};const i=await this.$http.function(t);i.code==0?(this.$msg.success("\u64CD\u4F5C\u6210\u529F"),this.$emit("on-success")):this.$msg.error(i.msg)},handleUpdateSuccess(){this.$emit("on-success")}},created(){}};function U(s,t,i,v,o,r){const d=l("el-table-column"),h=l("Edit"),m=l("el-icon"),g=l("el-link"),f=l("Delete"),b=l("el-popconfirm"),w=l("el-table"),y=l("DataFormDialog");return k(),S("div",null,[e(w,{data:i.list,stripe:"",border:""},{default:n(()=>[c(" \u4E3B\u673A\u5730\u5740 "),e(d,{label:"\u4E3B\u673A\u5730\u5740","header-align":"center",align:"center",prop:"host"},{default:n(a=>[u("span",null,_(a.row.host||"-"),1)]),_:1}),c(" \u7AEF\u53E3\u53F7 "),e(d,{label:"\u7AEF\u53E3\u53F7","header-align":"center",align:"center",width:"90",prop:"port"},{default:n(a=>[u("span",null,_(a.row.port||"-"),1)]),_:1}),c(" \u767B\u5F55\u7528\u6237 "),e(d,{label:"\u767B\u5F55\u7528\u6237","header-align":"center",align:"center",prop:"user"},{default:n(a=>[u("span",null,_(a.row.user||"-"),1)]),_:1}),c(" \u9A8C\u8BC1\u65B9\u5F0F "),e(d,{label:"\u9A8C\u8BC1\u65B9\u5F0F","header-align":"center",align:"center",width:"80",prop:"auth_type"},{default:n(a=>[u("span",null,_(a.row.auth_type_label||"-"),1)]),_:1}),c(" \u521B\u5EFA\u65F6\u95F4 "),e(d,{label:"\u521B\u5EFA\u65F6\u95F4","header-align":"center",align:"center",width:"180",prop:"create_time"},{default:n(a=>[u("span",null,_(a.row.create_time||"-"),1)]),_:1}),e(d,{label:"\u7F16\u8F91",width:"60","header-align":"center",align:"center"},{default:n(a=>[e(g,{underline:!1,type:"primary",onClick:p=>r.handleEditRow(a.row)},{default:n(()=>[e(m,null,{default:n(()=>[e(h)]),_:1})]),_:2},1032,["onClick"])]),_:1}),e(d,{label:"\u5220\u9664",width:"60",align:"center",prop:"tag"},{default:n(a=>[e(b,{title:`${s.$t("\u786E\u5B9A\u5220\u9664")}\uFF1F`,onConfirm:p=>r.handleDeleteClick(a.row)},{reference:n(()=>[e(g,{underline:!1,type:"danger"},{default:n(()=>[e(m,null,{default:n(()=>[e(f)]),_:1})]),_:1})]),_:2},1032,["title","onConfirm"])]),_:1})]),_:1},8,["data"]),c(" \u7F16\u8F91\u6846 "),e(y,{visible:o.dialogVisible,"onUpdate:visible":t[0]||(t[0]=a=>o.dialogVisible=a),row:o.currentRow,onOnSuccess:r.handleUpdateSuccess},null,8,["visible","row","onOnSuccess"])])}const A=C(x,[["render",U]]),F={name:"host-list",props:{},components:{DataFormDialog:D,DataTable:A},data(){return{list:[],total:0,page:1,size:20,keyword:"",loading:!0,dialogVisible:!1}},computed:{},methods:{resetData(){this.page=1,this.getData()},async getData(){this.loading=!0;let s={page:this.page,size:this.size,keyword:this.keyword};const t=await this.$http.getHostList(s);t.ok&&(this.total=t.data.total,this.list=t.data.list.map(i=>(i.auth_type_label=V(i.auth_type),i))),this.loading=!1},handleAddRow(){this.dialogVisible=!0},handleAddSuccess(){this.resetData()},handleSearch(){this.resetData()}},created(){this.getData()}},T={class:"app-container"},B={class:"flex justify-between margin-bottom--20"};function H(s,t,i,v,o,r){const d=l("Plus"),h=l("el-icon"),m=l("el-button"),g=l("Search"),f=l("el-input"),b=l("DataTable"),w=l("el-pagination"),y=l("DataFormDialog"),a=R("loading");return k(),S("div",T,[c(" \u64CD\u4F5C\u6309\u94AE "),u("div",B,[e(m,{type:"primary",onClick:r.handleAddRow},{default:n(()=>[e(h,null,{default:n(()=>[e(d)]),_:1}),O(_(s.$t("\u6DFB\u52A0")),1)]),_:1},8,["onClick"]),e(f,{class:"ml-sm",style:{width:"260px"},modelValue:o.keyword,"onUpdate:modelValue":t[0]||(t[0]=p=>o.keyword=p),placeholder:"\u8F93\u5165\u4E3B\u673A\u5730\u5740",clearable:"",onKeypress:z(r.handleSearch,["enter"]),onClear:r.handleSearch},{append:n(()=>[e(m,{onClick:r.handleSearch},{default:n(()=>[e(h,null,{default:n(()=>[e(g)]),_:1})]),_:1},8,["onClick"])]),_:1},8,["modelValue","onKeypress","onClear"])]),c(" \u6570\u636E\u5217\u8868 "),E(e(b,{class:"mt-md",list:o.list,onOnSuccess:r.resetData,onOnEditRow:s.handleEditRow},null,8,["list","onOnSuccess","onOnEditRow"]),[[a,o.loading]]),c(" \u7FFB\u9875 "),e(w,{class:"mt-md justify-center",background:"",layout:"total, prev, pager, next",total:o.total,"page-size":o.size,"onUpdate:pageSize":t[1]||(t[1]=p=>o.size=p),"current-page":o.page,"onUpdate:currentPage":t[2]||(t[2]=p=>o.page=p),onCurrentChange:r.getData},null,8,["total","page-size","current-page","onCurrentChange"]),c(" \u7F16\u8F91\u6846 "),e(y,{visible:o.dialogVisible,"onUpdate:visible":t[3]||(t[3]=p=>o.dialogVisible=p),onOnSuccess:r.handleAddSuccess},null,8,["visible","onOnSuccess"])])}const q=C(F,[["render",H]]);export{q as default};
