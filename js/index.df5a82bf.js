import{_ as yt}from"./index.b360bf28.js";import{ah as W,o as ot,c as pt,V as F,P as H,a as it,T as _t,U as dt,O as bt,F as Ot,S as Dt,aC as jt,aD as Wt,a8 as Vt,ar as Jt,a9 as Qt,Q as te}from"./vendor-vue.cefe3aef.js";import{F as xt,c as Zt}from"./vendor-lib.a8c0b8df.js";import{H as Rt}from"./highlight-lib.3654f6d3.js";import{C as Pt}from"./ConnectStatus.f7b02000.js";import{D as ee}from"./DataFormDialog.f0bdf39e.js";import{h as ne}from"./highlight-util.a4f1867f.js";import{c as $t}from"./element-plus.af689926.js";import{c as Bt}from"./_commonjs-dynamic-modules.377d74e3.js";import{E as re}from"./ExpireProgress.b46f3903.js";import{D as ie}from"./DataCount.dfe635cc.js";import"./element-icon.1fe9d2a8.js";const se={domains:[{message:"\u57DF\u540D\u5217\u8868\u4E0D\u80FD\u4E3A\u7A7A",required:!0,trigger:"blur"}],status:[{message:"\u9A8C\u8BC1\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",required:!0,trigger:"blur"}],start_time:[{message:"SSL\u7B7E\u53D1\u65F6\u95F4\u4E0D\u80FD\u4E3A\u7A7A",required:!0,trigger:"blur"}],expire_time:[{message:"SSL\u8FC7\u671F\u65F6\u95F4\u4E0D\u80FD\u4E3A\u7A7A",required:!0,trigger:"blur"}],create_time_label:[{message:"\u521B\u5EFA\u65F6\u95F4\u4E0D\u80FD\u4E3A\u7A7A",required:!0,trigger:"blur"}]},ae={name:"",props:{row:{type:Object,default:null}},components:{},data(){return{rules:se,form:{domains:"",status:"",start_time:"",expire_time:"",create_time_label:""}}},computed:{},methods:{async getData(){if(this.row){let b={id:this.row.id};const C=await this.$http.function(b);if(C.code!=0)return;let i=C.data;this.form.domains=i.domains,this.form.status=i.status,this.form.start_time=i.start_time,this.form.expire_time=i.expire_time,this.form.create_time_label=i.create_time_label}},handleCancel(){this.$emit("on-cancel")},handleSubmit(){this.$refs.form.validate(b=>{if(b)this.confirmSubmit();else return!1})},async confirmSubmit(){let b=this.$loading({fullscreen:!0}),C=this.form.domains.split(`
`);if(C=C.map(h=>h.trim()).filter(h=>h),C.length==0){this.$msg.error("\u8BF7\u8F93\u5165\u57DF\u540D");return}let i={domains:C};this.row&&(i.id=this.row.id);const E=await this.$http.issueCertificate(i);E.code==0?(this.$msg.success("\u64CD\u4F5C\u6210\u529F"),this.$emit("on-success",E.data)):this.$msg.error(E.msg),this.$nextTick(()=>{b.close()})}},created(){this.getData()}},oe={class:"ml-[110px] text-sm color--info flex items-center"},le=it("span",null,[_t("\xA0\u514D\u8D39SSL\u8BC1\u4E66\u9881\u53D1\u673A\u6784: "),it("a",{href:"https://letsencrypt.org/zh-cn/docs/rate-limits/?from=domain-admin",target:"_blank",class:"mo-link"},"Let\u2019s Encrypt")],-1),ce=it("span",null,"\uFF1B\xA0\u7533\u8BF7\u57DF\u540D\u4E3Awww.domain.com\u7684\u8BC1\u4E66\u540C\u65F6\u652F\u6301\u4FDD\u62A4domain.com",-1),de={class:"text-center mt-md"};function he(b,C,i,E,h,r){const o=W("el-input"),n=W("el-form-item"),l=W("el-form"),_=W("Warning"),v=W("el-icon"),g=W("el-button");return ot(),pt("div",null,[F(l,{ref:"form",model:h.form,rules:h.rules,"label-width":"110px"},{default:H(()=>[F(n,{label:"id",prop:"id",style:{display:"none"}},{default:H(()=>[F(o,{type:"text",modelValue:h.form.id,"onUpdate:modelValue":C[0]||(C[0]=y=>h.form.id=y),placeholder:"id"},null,8,["modelValue"])]),_:1}),F(n,{label:b.$t("\u57DF\u540D\u5217\u8868"),prop:"domains"},{default:H(()=>[F(o,{type:"textarea",modelValue:h.form.domains,"onUpdate:modelValue":C[1]||(C[1]=y=>h.form.domains=y),rows:5,placeholder:b.$t("\u8BF7\u8F93\u5165\u57DF\u540D\u5217\u8868\uFF0C\u6BCF\u884C\u4E00\u4E2A")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"]),it("div",oe,[F(v,null,{default:H(()=>[F(_)]),_:1}),le,ce]),it("div",de,[F(g,{onClick:r.handleCancel},{default:H(()=>[_t(dt(b.$t("\u53D6\u6D88")),1)]),_:1},8,["onClick"]),F(g,{type:"primary",onClick:r.handleSubmit},{default:H(()=>[_t(dt(b.$t("\u786E\u5B9A")),1)]),_:1},8,["onClick"])])])}const Ht=yt(ae,[["render",he]]),ue={name:"",components:{ConnectStatus:Pt},props:{list:{type:Array}},emits:["on-success"],computed:{},data(){return{currentRow:null,dialogVisible:!1}},methods:{handleEditRow(b){this.currentRow=b,this.dialogVisible=!0},async handleDeleteClick(b){let C={id:b.id};const i=await this.$http.function(C);i.code==0?(this.$msg.success("\u64CD\u4F5C\u6210\u529F"),this.$emit("on-success")):this.$msg.error(i.msg)},async handleStatusChange(b){let C={id:b.id};const i=await this.$http.function(C);i.code==0?(this.$msg.success("\u64CD\u4F5C\u6210\u529F"),this.$emit("on-success")):this.$msg.error(i.msg)},handleUpdateSuccess(){this.$emit("on-success")},downloadVerifyFile(b){let C=new Blob([b.validation],{type:"application/octet-stream;charset=utf-8"});xt.saveAs(C,b.token)},handleCopyClick(b){Zt(b),this.$msg.success("\u5DF2\u590D\u5236\u5230\u526A\u5207\u677F")},async handleVerifyDomainById(b){let C=this.$loading({fullscreen:!0}),i={domain_verify_id:b.id};const E=await this.$http.verifyCertificateById(i);E.code==0?(this.$msg.success("\u9A8C\u8BC1\u6210\u529F"),this.$emit("on-success",E.data)):this.$msg.error(E.msg),this.$nextTick(()=>{C.close()})}},created(){}},fe={style:{"margin-left":"4px"}},pe=["onClick"],me=["onClick"];function _e(b,C,i,E,h,r){const o=W("el-table-column"),n=W("ConnectStatus"),l=W("el-table");return ot(),pt("div",null,[F(l,{data:i.list,stripe:"",border:""},{default:H(()=>[F(o,{label:b.$t("\u57DF\u540D"),"header-align":"center",align:"center",prop:"domain",width:"230"},{default:H(_=>[it("span",null,dt(_.row.domain),1)]),_:1},8,["label"]),F(o,{label:b.$t("\u9A8C\u8BC1\u72B6\u6001"),"header-align":"center",align:"center",prop:"status",width:"100"},{default:H(_=>[F(n,{value:_.row.status_value},null,8,["value"]),it("span",fe,dt(_.row.status||"-"),1)]),_:1},8,["label"]),F(o,{label:b.$t("TXT\u8BB0\u5F55"),"header-align":"center",align:"center",prop:"token"},{default:H(_=>[it("div",{onClick:v=>r.handleCopyClick(_.row.token)},[it("span",null,"_acme-challenge."+dt(_.row.domain),1)],8,pe)]),_:1},8,["label"]),F(o,{label:b.$t("\u8BB0\u5F55\u503C"),"header-align":"center",align:"center",prop:"token"},{default:H(_=>[it("div",{onClick:v=>r.handleCopyClick(_.row.validation)},dt(_.row.validation||"-"),9,me)]),_:1},8,["label"])]),_:1},8,["data"])])}const ge=yt(ue,[["render",_e]]);const ye={name:"VerifyStep",props:{form:{type:Object},list:{type:Array}},emits:["on-success"],components:{VerifyStepDNSDataTable:ge},data(){return{}},computed:{domain_list(){return this.form.domains.join(" ")},nginxConfig(){return`server {
  listen 80;
  server_name ${this.domain_list};

  location /.well-known/acme-challenge/ {
      alias /var/www/challenges/;
      try_files $uri =404;
  }
}`}},methods:{async getData(){},async handleSubmit(){let b=this.$loading({fullscreen:!0}),C={issue_certificate_id:this.form.id,challenge_type:"dns-01"};const i=await this.$http.verifyCertificateById(C);i.code==0?(this.$msg.success("\u9A8C\u8BC1\u6210\u529F"),this.$emit("on-success",i.data)):this.$msg.error(i.msg),this.$nextTick(()=>{b.close()})},downloadVerifyFile(){let b=new Blob([this.form.validation],{type:"application/octet-stream;charset=utf-8"});xt.saveAs(b,this.form.token)}},mounted(){Rt.highlightAll()},created(){this.getData()}},be={class:"mo-form-detail"},ve={class:"text-center mt-md"};function we(b,C,i,E,h,r){const o=W("VerifyStepDNSDataTable"),n=W("el-button");return ot(),pt("div",be,[F(o,{form:i.form,list:i.list,"challenge-type":"dns-01"},null,8,["form","list"]),it("div",ve,[F(n,{type:"primary",onClick:r.handleSubmit},{default:H(()=>[_t("\u9A8C \u8BC1")]),_:1},8,["onClick"])])])}const ke=yt(ye,[["render",we],["__scopeId","data-v-d9734d73"]]),Se={name:"",components:{ConnectStatus:Pt},props:{list:{type:Array}},emits:["on-success"],computed:{},data(){return{currentRow:null,dialogVisible:!1}},methods:{handleEditRow(b){this.currentRow=b,this.dialogVisible=!0},async handleDeleteClick(b){let C={id:b.id};const i=await this.$http.function(C);i.code==0?(this.$msg.success("\u64CD\u4F5C\u6210\u529F"),this.$emit("on-success")):this.$msg.error(i.msg)},async handleStatusChange(b){let C={id:b.id};const i=await this.$http.function(C);i.code==0?(this.$msg.success("\u64CD\u4F5C\u6210\u529F"),this.$emit("on-success")):this.$msg.error(i.msg)},handleUpdateSuccess(){this.$emit("on-success")},downloadVerifyFile(b){let C=new Blob([b.validation],{type:"application/octet-stream;charset=utf-8"});xt.saveAs(C,b.token)},handleCopyClick(b){Zt(b),this.$msg.success("\u5DF2\u590D\u5236\u5230\u526A\u5207\u677F")},async handleVerifyDomainById(b){let C=this.$loading({fullscreen:!0}),i={domain_verify_id:b.id};const E=await this.$http.verifyCertificateById(i);E.code==0?(this.$msg.success("\u9A8C\u8BC1\u6210\u529F"),this.$emit("on-success",E.data)):this.$msg.error(E.msg),this.$nextTick(()=>{C.close()})}},created(){}},Ce={style:{"margin-left":"4px"}},xe=["href"];function De(b,C,i,E,h,r){const o=W("el-table-column"),n=W("ConnectStatus"),l=W("Download"),_=W("el-icon"),v=W("el-link"),g=W("el-table");return ot(),pt("div",null,[F(g,{data:i.list,stripe:"",border:""},{default:H(()=>[F(o,{label:b.$t("\u57DF\u540D"),"header-align":"center",align:"center",prop:"domain",width:"230","show-overflow-tooltip":""},{default:H(y=>[it("span",null,dt(y.row.domain||"-"),1)]),_:1},8,["label"]),F(o,{label:b.$t("\u9A8C\u8BC1\u72B6\u6001"),"header-align":"center",align:"center",prop:"status",width:"100"},{default:H(y=>[F(n,{value:y.row.status_value},null,8,["value"]),it("span",Ce,dt(y.row.status||"-"),1)]),_:1},8,["label"]),F(o,{label:b.$t("\u9A8C\u8BC1URL"),"header-align":"center",align:"center",prop:"validation","show-overflow-tooltip":""},{default:H(y=>[it("a",{href:y.row.verify_url,target:"_blank",class:"mo-link"},dt(y.row.verify_url),9,xe)]),_:1},8,["label"]),F(o,{label:b.$t("\u9A8C\u8BC1\u6587\u4EF6"),"header-align":"center",align:"center",prop:"validation",width:"110"},{default:H(y=>[F(v,{underline:!1,type:"primary",class:"mr-sm",onClick:a=>r.downloadVerifyFile(y.row)},{default:H(()=>[F(_,null,{default:H(()=>[F(l)]),_:1}),_t(dt(b.$t("\u4E0B\u8F7D")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])])}const ze=yt(Se,[["render",De]]),Ae={name:"RemoteHost",props:{defaultKeyword:{type:String,default:""},modelValue:{type:Object,default:null}},emits:["on-confirm","update:modelValue"],components:{DataFormDialog:ee},data(){return{visible:!1,keyword:"",list:[],editValue:null}},computed:{disabled(){return!(this.modelValue&&this.modelValue.id)},value:{get(){return this.modelValue},set(b){this.$emit("update:modelValue",b)}}},methods:{async getData(){this.defaultKeyword&&(this.keyword=this.defaultKeyword)},handleClose(){this.value=null},handleAddClick(){this.editValue={host:this.keyword},this.visible=!0},handleEditHost(){this.editValue=this.value,this.visible=!0},async handleSearch(b,C){let i={keyword:b};const E=await this.$http.getHostList(i);E.code==0?C(E.data.list.map(h=>(h.value=h.host,h))):this.$msg.error(E.msg)},handleSelect(b){console.log(b),this.value=b},handleDeployVerifyFile(){this.$emit("on-confirm",this.value)},handleSuccess(b){this.value=b,this.$emit("on-change")}},created(){this.getData()}},Ee={class:"flex flex-1 items-center"};function Oe(b,C,i,E,h,r){const o=W("el-tag"),n=W("el-autocomplete"),l=W("Plus"),_=W("el-icon"),v=W("el-link"),g=W("el-button"),y=W("DataFormDialog");return ot(),pt("div",Ee,[r.value&&r.value.id?(ot(),bt(o,{key:0,class:"cursor-pointer",closable:"",onClose:r.handleClose,onClick:r.handleEditHost},{default:H(()=>[_t(dt(r.value.user)+"@"+dt(r.value.host),1),r.value.port!=22?(ot(),pt(Ot,{key:0},[_t(":"+dt(r.value.port),1)],64)):Dt("",!0)]),_:1},8,["onClose","onClick"])):(ot(),pt(Ot,{key:1},[F(n,{modelValue:h.keyword,"onUpdate:modelValue":C[0]||(C[0]=a=>h.keyword=a),style:{width:"180px"},"fetch-suggestions":r.handleSearch,clearable:"",placeholder:b.$t("\u641C\u7D22\u4E3B\u673A"),onSelect:r.handleSelect},null,8,["modelValue","fetch-suggestions","placeholder","onSelect"]),F(v,{class:"ml-sm",underline:!1,type:"primary",onClick:r.handleAddClick},{default:H(()=>[F(_,null,{default:H(()=>[F(l)]),_:1}),it("span",null,dt(b.$t("\u6DFB\u52A0")),1)]),_:1},8,["onClick"])],64)),F(g,{class:"ml-md ml-auto",disabled:r.disabled,onClick:r.handleDeployVerifyFile},{default:H(()=>[_t(dt(b.$t("\u4E00\u952E\u90E8\u7F72")),1)]),_:1},8,["disabled","onClick"]),F(y,{visible:h.visible,"onUpdate:visible":C[1]||(C[1]=a=>h.visible=a),row:h.editValue,onOnSuccess:r.handleSuccess},null,8,["visible","row","onOnSuccess"])])}const Ut=yt(Ae,[["render",Oe]]);const Ie={name:"CodeHighlight",props:{value:{type:String,default:""},language:{type:String,default:"nginx"}},components:{},data(){return{}},computed:{highlightValue(){return Rt.highlight(this.value,{language:this.language}).value}},methods:{async getData(){}},mounted(){Rt.highlightAll()},created(){this.getData()}},Fe={class:"code-highlight"},$e=["innerHTML"];function Be(b,C,i,E,h,r){return ot(),pt("div",Fe,[it("pre",null,[it("code",{innerHTML:r.highlightValue},null,8,$e)])])}const Mt=yt(Ie,[["render",Be]]);const Re={name:"VerifyStep",props:{form:{type:Object},list:{type:Array}},emits:["on-success"],components:{VerifyStepFileDataTable:ze,RemoteHost:Ut,CodeHighlight:Mt},data(){return{host:"",hasInit:!1,deployForm:{deploy_host:null,verifyDeployPath:""},rules:{deploy_host:[{message:"\u670D\u52A1\u5668\u4E0D\u80FD\u4E3A\u7A7A",required:!0,trigger:"blur"}],verifyDeployPath:[{message:"\u670D\u52A1\u5668\u90E8\u7F72\u76EE\u5F55\u4E0D\u80FD\u4E3A\u7A7A",required:!0,trigger:"blur"}]}}},computed:{domain_list(){return this.form.domains.join(" ")},nginxConfig(){return`server {
  listen 80;
  server_name ${this.domain_list};

  location /.well-known/acme-challenge/ {
      alias ${this.deployForm.verifyDeployPath};
      try_files $uri = 404;
  }
}`}},methods:{async getData(){await this.getDomainHost(),this.hasInit=!0},async getDomainHost(){let b={domain:this.form.domains[0]};const C=await this.$http.getDomainHost(b);C.code==0?(this.host=C.data.host,this.host&&await this.getHost()):this.$msg.error(C.msg)},async getHost(){let b={host:this.host};const C=await this.$http.getHostList(b);C.data.list&&C.data.list.length>0&&(this.deployForm.deploy_host=C.data.list[0])},async handleVerifyCertificateById(){let b=this.$loading({fullscreen:!0}),C={issue_certificate_id:this.form.id,challenge_type:"http-01"};const i=await this.$http.verifyCertificateById(C);i.code==0?(this.$msg.success("\u9A8C\u8BC1\u6210\u529F"),this.$emit("on-success",i.data)):this.$msg.error(i.msg),this.$nextTick(()=>{b.close()})},downloadVerifyFile(){let b=new Blob([this.form.validation],{type:"application/octet-stream;charset=utf-8"});xt.saveAs(b,this.form.token)},async handleDeployVerifyFile(b){this.$refs.form.validate(C=>{if(C)this.confirmDeployVerifyFile(b);else return!1})},async confirmDeployVerifyFile(b){let C=this.$loading({fullscreen:!0}),i={issue_certificate_id:this.form.id,host_id:b.id,verify_deploy_path:this.deployForm.verifyDeployPath,challenges:this.list};const E=await this.$http.deployVerifyFile(i);E.code==0?(this.$msg.success("\u90E8\u7F72\u6210\u529F"),this.$emit("on-success",E.data)):this.$msg.error(E.msg),this.$nextTick(()=>{C.close()})},handleChangeHost(){this.$refs.form.validateField(["deploy_host"])}},created(){this.deployForm.verifyDeployPath="/var/www/challenges/",this.getData()}},Te={class:""},Ve={class:"text-center mt-md"};function Pe(b,C,i,E,h,r){const o=W("VerifyStepFileDataTable"),n=W("RemoteHost"),l=W("el-form-item"),_=W("el-input"),v=W("CodeHighlight"),g=W("el-form"),y=W("el-button");return ot(),pt("div",Te,[F(o,{form:i.form,list:i.list,"challenge-type":"http-01"},null,8,["form","list"]),F(g,{ref:"form","label-width":"130px",class:"mt-md",model:h.deployForm,rules:h.rules},{default:H(()=>[F(l,{label:b.$t("\u670D\u52A1\u5668\u5730\u5740"),prop:"deploy_host"},{default:H(()=>[h.hasInit?(ot(),bt(n,{key:0,defaultKeyword:h.host,modelValue:h.deployForm.deploy_host,"onUpdate:modelValue":C[0]||(C[0]=a=>h.deployForm.deploy_host=a),onOnChange:r.handleChangeHost,onOnConfirm:r.handleDeployVerifyFile},null,8,["defaultKeyword","modelValue","onOnChange","onOnConfirm"])):Dt("",!0)]),_:1},8,["label"]),F(l,{label:b.$t("\u670D\u52A1\u5668\u76EE\u5F55"),prop:"verifyDeployPath"},{default:H(()=>[F(_,{modelValue:h.deployForm.verifyDeployPath,"onUpdate:modelValue":C[1]||(C[1]=a=>h.deployForm.verifyDeployPath=a)},null,8,["modelValue"])]),_:1},8,["label"]),F(l,{label:b.$t("Nginx\u914D\u7F6E"),prop:"isp"},{default:H(()=>[F(v,{value:r.nginxConfig},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model","rules"]),it("div",Ve,[F(y,{type:"primary",onClick:r.handleVerifyCertificateById},{default:H(()=>[_t(dt(b.$t("\u9A8C\u8BC1")),1)]),_:1},8,["onClick"])])])}const Ue=yt(Re,[["render",Pe],["__scopeId","data-v-da4fd5f6"]]);const Ne={name:"VerifyStep",props:{form:{type:Object}},emits:["on-success"],components:{VerifyStepDNS:ke,VerifyStepFile:Ue},data(){return{list:[],activeName:"file"}},computed:{fileList(){return this.list.filter(b=>b.challenge&&b.challenge.type=="http-01").map(b=>(b.verify_path="/.well-known/acme-challenge/"+b.token,b.verify_url="http://"+b.domain+b.verify_path,b))},dnsList(){return this.list.filter(b=>b.challenge&&b.challenge.type=="dns-01")}},methods:{async getData(){this.loading=!0;let b={issue_certificate_id:this.form.id};try{const C=await this.$http.getCertificateChallenges(b);this.list=C.data.list.map(i=>(i.challenge&&(i={...i.challenge,...i}),i.status=="valid"?i.status_value=!0:i.status=="invalid"?i.status_value=!1:i.status_value=null,i)),console.log(this.list),this.total=C.data.total}catch(C){console.log(C)}finally{this.loading=!1}},handleSuccess(){this.$emit("on-success")}},mounted(){},created(){this.getData()}},Le=b=>(jt("data-v-6135d497"),b=b(),Wt(),b),je={class:""},We={class:"text-sm color--info flex items-center justify-end"},Ze=Le(()=>it("span",null,"\xA0\u9A8C\u8BC1\u901A\u8FC7\u540E\u4F1A\u81EA\u52A8\u52A0\u5165\u5230[\u8BC1\u4E66\u76D1\u63A7]\u5217\u8868 ",-1));function He(b,C,i,E,h,r){const o=W("Warning"),n=W("el-icon"),l=W("VerifyStepFile"),_=W("el-tab-pane"),v=W("VerifyStepDNS"),g=W("el-tabs");return ot(),pt("div",je,[it("div",We,[F(n,null,{default:H(()=>[F(o)]),_:1}),Ze]),F(g,{modelValue:h.activeName,"onUpdate:modelValue":C[0]||(C[0]=y=>h.activeName=y)},{default:H(()=>[F(_,{label:b.$t("\u6587\u4EF6\u9A8C\u8BC1"),name:"file",lazy:""},{default:H(()=>[F(l,{form:i.form,list:r.fileList,onOnSuccess:r.handleSuccess},null,8,["form","list","onOnSuccess"])]),_:1},8,["label"]),F(_,{label:b.$t("DNS\u9A8C\u8BC1"),name:"dns",lazy:""},{default:H(()=>[F(v,{form:i.form,list:r.dnsList,onOnSuccess:r.handleSuccess},null,8,["form","list","onOnSuccess"])]),_:1},8,["label"])]),_:1},8,["modelValue"])])}const Me=yt(Ne,[["render",He],["__scopeId","data-v-6135d497"]]);const Ke={name:"VerifyStep",props:{form:{type:Object}},emits:["on-success"],components:{RemoteHost:Ut},data(){return{hasInit:!1,host:"",keyDeployPath:"",pemDeployPath:""}},computed:{domain_list(){return this.form.domains.join(" ")},nginxConfig(){return ne(this.nginxConfigTemplate,{language:"nginx"}).value}},methods:{async getData(){this.keyDeployPath=`/path/to/${this.form.domains[0]}.key`,this.pemDeployPath=`/path/to/${this.form.domains[0]}.pem`},handleClose(){this.$emit("on-close")},async handleSubmit(){let b=this.$loading({fullscreen:!0}),C={issue_certificate_id:this.form.id};const i=await this.$http.renewCertificate(C);return i.code==0?(this.$msg.success("\u64CD\u4F5C\u6210\u529F"),this.$emit("on-success")):this.$msg.error(i.msg),this.$nextTick(()=>{b.close()}),i},downloadSSLKeyFile(){console.log(JSON.stringify(this.form,null,2));let b=new Blob([this.form.ssl_certificate_key],{type:"text/plain;charset=utf-8"}),C=this.form.domains[0];xt.saveAs(b,`${C}.key`)},async downloadSSLFile(){if(!this.form.ssl_certificate){const i=await this.handleSubmit();this.form.ssl_certificate=i.data.ssl_certificate}let b=new Blob([this.form.ssl_certificate],{type:"text/plain;charset=utf-8"}),C=this.form.domains[0];xt.saveAs(b,`${C}.pem`)},async getDomainHost(){let b={domain:this.form.domains[0]};const C=await this.$http.getDomainHost(b);C.code==0?this.host=C.data.host:this.$msg.error(C.msg),this.hasInit=!0},handleDeployVerifyFile(){}},mounted(){Rt.highlightAll()},created(){this.getDomainHost(),this.getData()}},Ge={class:"text-center mt-md"};function Ye(b,C,i,E,h,r){const o=W("el-button");return ot(),pt("div",null,[it("div",Ge,[F(o,{type:"primary",onClick:r.handleSubmit},{default:H(()=>[_t("\u7533 \u8BF7")]),_:1},8,["onClick"])])])}const qe=yt(Ke,[["render",Ye],["__scopeId","data-v-ba24cbba"]]);var Kt={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(b,C){(function(i){b.exports=i()})(function(){return function i(E,h,r){function o(_,v){if(!h[_]){if(!E[_]){var g=typeof Bt=="function"&&Bt;if(!v&&g)return g(_,!0);if(n)return n(_,!0);var y=new Error("Cannot find module '"+_+"'");throw y.code="MODULE_NOT_FOUND",y}var a=h[_]={exports:{}};E[_][0].call(a.exports,function(m){var s=E[_][1][m];return o(s||m)},a,a.exports,i,E,h,r)}return h[_].exports}for(var n=typeof Bt=="function"&&Bt,l=0;l<r.length;l++)o(r[l]);return o}({1:[function(i,E,h){var r=i("./utils"),o=i("./support"),n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";h.encode=function(l){for(var _,v,g,y,a,m,s,u=[],c=0,p=l.length,S=p,k=r.getTypeOf(l)!=="string";c<l.length;)S=p-c,g=k?(_=l[c++],v=c<p?l[c++]:0,c<p?l[c++]:0):(_=l.charCodeAt(c++),v=c<p?l.charCodeAt(c++):0,c<p?l.charCodeAt(c++):0),y=_>>2,a=(3&_)<<4|v>>4,m=1<S?(15&v)<<2|g>>6:64,s=2<S?63&g:64,u.push(n.charAt(y)+n.charAt(a)+n.charAt(m)+n.charAt(s));return u.join("")},h.decode=function(l){var _,v,g,y,a,m,s=0,u=0,c="data:";if(l.substr(0,c.length)===c)throw new Error("Invalid base64 input, it looks like a data url.");var p,S=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===n.charAt(64)&&S--,l.charAt(l.length-2)===n.charAt(64)&&S--,S%1!=0)throw new Error("Invalid base64 input, bad content length.");for(p=o.uint8array?new Uint8Array(0|S):new Array(0|S);s<l.length;)_=n.indexOf(l.charAt(s++))<<2|(y=n.indexOf(l.charAt(s++)))>>4,v=(15&y)<<4|(a=n.indexOf(l.charAt(s++)))>>2,g=(3&a)<<6|(m=n.indexOf(l.charAt(s++))),p[u++]=_,a!==64&&(p[u++]=v),m!==64&&(p[u++]=g);return p}},{"./support":30,"./utils":32}],2:[function(i,E,h){var r=i("./external"),o=i("./stream/DataWorker"),n=i("./stream/Crc32Probe"),l=i("./stream/DataLengthProbe");function _(v,g,y,a,m){this.compressedSize=v,this.uncompressedSize=g,this.crc32=y,this.compression=a,this.compressedContent=m}_.prototype={getContentWorker:function(){var v=new o(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),g=this;return v.on("end",function(){if(this.streamInfo.data_length!==g.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),v},getCompressedWorker:function(){return new o(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},_.createWorkerFrom=function(v,g,y){return v.pipe(new n).pipe(new l("uncompressedSize")).pipe(g.compressWorker(y)).pipe(new l("compressedSize")).withStreamInfo("compression",g)},E.exports=_},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(i,E,h){var r=i("./stream/GenericWorker");h.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},h.DEFLATE=i("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(i,E,h){var r=i("./utils"),o=function(){for(var n,l=[],_=0;_<256;_++){n=_;for(var v=0;v<8;v++)n=1&n?3988292384^n>>>1:n>>>1;l[_]=n}return l}();E.exports=function(n,l){return n!==void 0&&n.length?r.getTypeOf(n)!=="string"?function(_,v,g,y){var a=o,m=y+g;_^=-1;for(var s=y;s<m;s++)_=_>>>8^a[255&(_^v[s])];return-1^_}(0|l,n,n.length,0):function(_,v,g,y){var a=o,m=y+g;_^=-1;for(var s=y;s<m;s++)_=_>>>8^a[255&(_^v.charCodeAt(s))];return-1^_}(0|l,n,n.length,0):0}},{"./utils":32}],5:[function(i,E,h){h.base64=!1,h.binary=!1,h.dir=!1,h.createFolders=!0,h.date=null,h.compression=null,h.compressionOptions=null,h.comment=null,h.unixPermissions=null,h.dosPermissions=null},{}],6:[function(i,E,h){var r=null;r=typeof Promise<"u"?Promise:i("lie"),E.exports={Promise:r}},{lie:37}],7:[function(i,E,h){var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=i("pako"),n=i("./utils"),l=i("./stream/GenericWorker"),_=r?"uint8array":"array";function v(g,y){l.call(this,"FlateWorker/"+g),this._pako=null,this._pakoAction=g,this._pakoOptions=y,this.meta={}}h.magic="\b\0",n.inherits(v,l),v.prototype.processChunk=function(g){this.meta=g.meta,this._pako===null&&this._createPako(),this._pako.push(n.transformTo(_,g.data),!1)},v.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},v.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},v.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var g=this;this._pako.onData=function(y){g.push({data:y,meta:g.meta})}},h.compressWorker=function(g){return new v("Deflate",g)},h.uncompressWorker=function(){return new v("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(i,E,h){function r(a,m){var s,u="";for(s=0;s<m;s++)u+=String.fromCharCode(255&a),a>>>=8;return u}function o(a,m,s,u,c,p){var S,k,D=a.file,P=a.compression,B=p!==_.utf8encode,j=n.transformTo("string",p(D.name)),$=n.transformTo("string",_.utf8encode(D.name)),G=D.comment,tt=n.transformTo("string",p(G)),w=n.transformTo("string",_.utf8encode(G)),R=$.length!==D.name.length,e=w.length!==G.length,V="",nt="",L="",rt=D.dir,Z=D.date,et={crc32:0,compressedSize:0,uncompressedSize:0};m&&!s||(et.crc32=a.crc32,et.compressedSize=a.compressedSize,et.uncompressedSize=a.uncompressedSize);var O=0;m&&(O|=8),B||!R&&!e||(O|=2048);var A=0,Q=0;rt&&(A|=16),c==="UNIX"?(Q=798,A|=function(Y,ht){var gt=Y;return Y||(gt=ht?16893:33204),(65535&gt)<<16}(D.unixPermissions,rt)):(Q=20,A|=function(Y){return 63&(Y||0)}(D.dosPermissions)),S=Z.getUTCHours(),S<<=6,S|=Z.getUTCMinutes(),S<<=5,S|=Z.getUTCSeconds()/2,k=Z.getUTCFullYear()-1980,k<<=4,k|=Z.getUTCMonth()+1,k<<=5,k|=Z.getUTCDate(),R&&(nt=r(1,1)+r(v(j),4)+$,V+="up"+r(nt.length,2)+nt),e&&(L=r(1,1)+r(v(tt),4)+w,V+="uc"+r(L.length,2)+L);var q="";return q+=`
\0`,q+=r(O,2),q+=P.magic,q+=r(S,2),q+=r(k,2),q+=r(et.crc32,4),q+=r(et.compressedSize,4),q+=r(et.uncompressedSize,4),q+=r(j.length,2),q+=r(V.length,2),{fileRecord:g.LOCAL_FILE_HEADER+q+j+V,dirRecord:g.CENTRAL_FILE_HEADER+r(Q,2)+q+r(tt.length,2)+"\0\0\0\0"+r(A,4)+r(u,4)+j+V+tt}}var n=i("../utils"),l=i("../stream/GenericWorker"),_=i("../utf8"),v=i("../crc32"),g=i("../signature");function y(a,m,s,u){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=m,this.zipPlatform=s,this.encodeFileName=u,this.streamFiles=a,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}n.inherits(y,l),y.prototype.push=function(a){var m=a.meta.percent||0,s=this.entriesCount,u=this._sources.length;this.accumulate?this.contentBuffer.push(a):(this.bytesWritten+=a.data.length,l.prototype.push.call(this,{data:a.data,meta:{currentFile:this.currentFile,percent:s?(m+100*(s-u-1))/s:100}}))},y.prototype.openedSource=function(a){this.currentSourceOffset=this.bytesWritten,this.currentFile=a.file.name;var m=this.streamFiles&&!a.file.dir;if(m){var s=o(a,m,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:s.fileRecord,meta:{percent:0}})}else this.accumulate=!0},y.prototype.closedSource=function(a){this.accumulate=!1;var m=this.streamFiles&&!a.file.dir,s=o(a,m,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(s.dirRecord),m)this.push({data:function(u){return g.DATA_DESCRIPTOR+r(u.crc32,4)+r(u.compressedSize,4)+r(u.uncompressedSize,4)}(a),meta:{percent:100}});else for(this.push({data:s.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},y.prototype.flush=function(){for(var a=this.bytesWritten,m=0;m<this.dirRecords.length;m++)this.push({data:this.dirRecords[m],meta:{percent:100}});var s=this.bytesWritten-a,u=function(c,p,S,k,D){var P=n.transformTo("string",D(k));return g.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(c,2)+r(c,2)+r(p,4)+r(S,4)+r(P.length,2)+P}(this.dirRecords.length,s,a,this.zipComment,this.encodeFileName);this.push({data:u,meta:{percent:100}})},y.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},y.prototype.registerPrevious=function(a){this._sources.push(a);var m=this;return a.on("data",function(s){m.processChunk(s)}),a.on("end",function(){m.closedSource(m.previous.streamInfo),m._sources.length?m.prepareNextSource():m.end()}),a.on("error",function(s){m.error(s)}),this},y.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},y.prototype.error=function(a){var m=this._sources;if(!l.prototype.error.call(this,a))return!1;for(var s=0;s<m.length;s++)try{m[s].error(a)}catch{}return!0},y.prototype.lock=function(){l.prototype.lock.call(this);for(var a=this._sources,m=0;m<a.length;m++)a[m].lock()},E.exports=y},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(i,E,h){var r=i("../compressions"),o=i("./ZipFileWorker");h.generateWorker=function(n,l,_){var v=new o(l.streamFiles,_,l.platform,l.encodeFileName),g=0;try{n.forEach(function(y,a){g++;var m=function(p,S){var k=p||S,D=r[k];if(!D)throw new Error(k+" is not a valid compression method !");return D}(a.options.compression,l.compression),s=a.options.compressionOptions||l.compressionOptions||{},u=a.dir,c=a.date;a._compressWorker(m,s).withStreamInfo("file",{name:y,dir:u,date:c,comment:a.comment||"",unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions}).pipe(v)}),v.entriesCount=g}catch(y){v.error(y)}return v}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(i,E,h){function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new r;for(var n in this)typeof this[n]!="function"&&(o[n]=this[n]);return o}}(r.prototype=i("./object")).loadAsync=i("./load"),r.support=i("./support"),r.defaults=i("./defaults"),r.version="3.10.1",r.loadAsync=function(o,n){return new r().loadAsync(o,n)},r.external=i("./external"),E.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(i,E,h){var r=i("./utils"),o=i("./external"),n=i("./utf8"),l=i("./zipEntries"),_=i("./stream/Crc32Probe"),v=i("./nodejsUtils");function g(y){return new o.Promise(function(a,m){var s=y.decompressed.getContentWorker().pipe(new _);s.on("error",function(u){m(u)}).on("end",function(){s.streamInfo.crc32!==y.decompressed.crc32?m(new Error("Corrupted zip : CRC32 mismatch")):a()}).resume()})}E.exports=function(y,a){var m=this;return a=r.extend(a||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:n.utf8decode}),v.isNode&&v.isStream(y)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",y,!0,a.optimizedBinaryString,a.base64).then(function(s){var u=new l(a);return u.load(s),u}).then(function(s){var u=[o.Promise.resolve(s)],c=s.files;if(a.checkCRC32)for(var p=0;p<c.length;p++)u.push(g(c[p]));return o.Promise.all(u)}).then(function(s){for(var u=s.shift(),c=u.files,p=0;p<c.length;p++){var S=c[p],k=S.fileNameStr,D=r.resolve(S.fileNameStr);m.file(D,S.decompressed,{binary:!0,optimizedBinaryString:!0,date:S.date,dir:S.dir,comment:S.fileCommentStr.length?S.fileCommentStr:null,unixPermissions:S.unixPermissions,dosPermissions:S.dosPermissions,createFolders:a.createFolders}),S.dir||(m.file(D).unsafeOriginalName=k)}return u.zipComment.length&&(m.comment=u.zipComment),m})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(i,E,h){var r=i("../utils"),o=i("../stream/GenericWorker");function n(l,_){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(_)}r.inherits(n,o),n.prototype._bindStream=function(l){var _=this;(this._stream=l).pause(),l.on("data",function(v){_.push({data:v,meta:{percent:0}})}).on("error",function(v){_.isPaused?this.generatedError=v:_.error(v)}).on("end",function(){_.isPaused?_._upstreamEnded=!0:_.end()})},n.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},n.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},E.exports=n},{"../stream/GenericWorker":28,"../utils":32}],13:[function(i,E,h){var r=i("readable-stream").Readable;function o(n,l,_){r.call(this,l),this._helper=n;var v=this;n.on("data",function(g,y){v.push(g)||v._helper.pause(),_&&_(y)}).on("error",function(g){v.emit("error",g)}).on("end",function(){v.push(null)})}i("../utils").inherits(o,r),o.prototype._read=function(){this._helper.resume()},E.exports=o},{"../utils":32,"readable-stream":16}],14:[function(i,E,h){E.exports={isNode:typeof Buffer<"u",newBufferFrom:function(r,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(r,o);if(typeof r=="number")throw new Error('The "data" argument must not be a number');return new Buffer(r,o)},allocBuffer:function(r){if(Buffer.alloc)return Buffer.alloc(r);var o=new Buffer(r);return o.fill(0),o},isBuffer:function(r){return Buffer.isBuffer(r)},isStream:function(r){return r&&typeof r.on=="function"&&typeof r.pause=="function"&&typeof r.resume=="function"}}},{}],15:[function(i,E,h){function r(D,P,B){var j,$=n.getTypeOf(P),G=n.extend(B||{},v);G.date=G.date||new Date,G.compression!==null&&(G.compression=G.compression.toUpperCase()),typeof G.unixPermissions=="string"&&(G.unixPermissions=parseInt(G.unixPermissions,8)),G.unixPermissions&&16384&G.unixPermissions&&(G.dir=!0),G.dosPermissions&&16&G.dosPermissions&&(G.dir=!0),G.dir&&(D=c(D)),G.createFolders&&(j=u(D))&&p.call(this,j,!0);var tt=$==="string"&&G.binary===!1&&G.base64===!1;B&&B.binary!==void 0||(G.binary=!tt),(P instanceof g&&P.uncompressedSize===0||G.dir||!P||P.length===0)&&(G.base64=!1,G.binary=!0,P="",G.compression="STORE",$="string");var w=null;w=P instanceof g||P instanceof l?P:m.isNode&&m.isStream(P)?new s(D,P):n.prepareContent(D,P,G.binary,G.optimizedBinaryString,G.base64);var R=new y(D,w,G);this.files[D]=R}var o=i("./utf8"),n=i("./utils"),l=i("./stream/GenericWorker"),_=i("./stream/StreamHelper"),v=i("./defaults"),g=i("./compressedObject"),y=i("./zipObject"),a=i("./generate"),m=i("./nodejsUtils"),s=i("./nodejs/NodejsStreamInputAdapter"),u=function(D){D.slice(-1)==="/"&&(D=D.substring(0,D.length-1));var P=D.lastIndexOf("/");return 0<P?D.substring(0,P):""},c=function(D){return D.slice(-1)!=="/"&&(D+="/"),D},p=function(D,P){return P=P!==void 0?P:v.createFolders,D=c(D),this.files[D]||r.call(this,D,null,{dir:!0,createFolders:P}),this.files[D]};function S(D){return Object.prototype.toString.call(D)==="[object RegExp]"}var k={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(D){var P,B,j;for(P in this.files)j=this.files[P],(B=P.slice(this.root.length,P.length))&&P.slice(0,this.root.length)===this.root&&D(B,j)},filter:function(D){var P=[];return this.forEach(function(B,j){D(B,j)&&P.push(j)}),P},file:function(D,P,B){if(arguments.length!==1)return D=this.root+D,r.call(this,D,P,B),this;if(S(D)){var j=D;return this.filter(function(G,tt){return!tt.dir&&j.test(G)})}var $=this.files[this.root+D];return $&&!$.dir?$:null},folder:function(D){if(!D)return this;if(S(D))return this.filter(function($,G){return G.dir&&D.test($)});var P=this.root+D,B=p.call(this,P),j=this.clone();return j.root=B.name,j},remove:function(D){D=this.root+D;var P=this.files[D];if(P||(D.slice(-1)!=="/"&&(D+="/"),P=this.files[D]),P&&!P.dir)delete this.files[D];else for(var B=this.filter(function($,G){return G.name.slice(0,D.length)===D}),j=0;j<B.length;j++)delete this.files[B[j].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(D){var P,B={};try{if((B=n.extend(D||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=B.type.toLowerCase(),B.compression=B.compression.toUpperCase(),B.type==="binarystring"&&(B.type="string"),!B.type)throw new Error("No output type specified.");n.checkSupport(B.type),B.platform!=="darwin"&&B.platform!=="freebsd"&&B.platform!=="linux"&&B.platform!=="sunos"||(B.platform="UNIX"),B.platform==="win32"&&(B.platform="DOS");var j=B.comment||this.comment||"";P=a.generateWorker(this,B,j)}catch($){(P=new l("error")).error($)}return new _(P,B.type||"string",B.mimeType)},generateAsync:function(D,P){return this.generateInternalStream(D).accumulate(P)},generateNodeStream:function(D,P){return(D=D||{}).type||(D.type="nodebuffer"),this.generateInternalStream(D).toNodejsStream(P)}};E.exports=k},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(i,E,h){E.exports=i("stream")},{stream:void 0}],17:[function(i,E,h){var r=i("./DataReader");function o(n){r.call(this,n);for(var l=0;l<this.data.length;l++)n[l]=255&n[l]}i("../utils").inherits(o,r),o.prototype.byteAt=function(n){return this.data[this.zero+n]},o.prototype.lastIndexOfSignature=function(n){for(var l=n.charCodeAt(0),_=n.charCodeAt(1),v=n.charCodeAt(2),g=n.charCodeAt(3),y=this.length-4;0<=y;--y)if(this.data[y]===l&&this.data[y+1]===_&&this.data[y+2]===v&&this.data[y+3]===g)return y-this.zero;return-1},o.prototype.readAndCheckSignature=function(n){var l=n.charCodeAt(0),_=n.charCodeAt(1),v=n.charCodeAt(2),g=n.charCodeAt(3),y=this.readData(4);return l===y[0]&&_===y[1]&&v===y[2]&&g===y[3]},o.prototype.readData=function(n){if(this.checkOffset(n),n===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,l},E.exports=o},{"../utils":32,"./DataReader":18}],18:[function(i,E,h){var r=i("../utils");function o(n){this.data=n,this.length=n.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(n){this.checkIndex(this.index+n)},checkIndex:function(n){if(this.length<this.zero+n||n<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+n+"). Corrupted zip ?")},setIndex:function(n){this.checkIndex(n),this.index=n},skip:function(n){this.setIndex(this.index+n)},byteAt:function(){},readInt:function(n){var l,_=0;for(this.checkOffset(n),l=this.index+n-1;l>=this.index;l--)_=(_<<8)+this.byteAt(l);return this.index+=n,_},readString:function(n){return r.transformTo("string",this.readData(n))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var n=this.readInt(4);return new Date(Date.UTC(1980+(n>>25&127),(n>>21&15)-1,n>>16&31,n>>11&31,n>>5&63,(31&n)<<1))}},E.exports=o},{"../utils":32}],19:[function(i,E,h){var r=i("./Uint8ArrayReader");function o(n){r.call(this,n)}i("../utils").inherits(o,r),o.prototype.readData=function(n){this.checkOffset(n);var l=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,l},E.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(i,E,h){var r=i("./DataReader");function o(n){r.call(this,n)}i("../utils").inherits(o,r),o.prototype.byteAt=function(n){return this.data.charCodeAt(this.zero+n)},o.prototype.lastIndexOfSignature=function(n){return this.data.lastIndexOf(n)-this.zero},o.prototype.readAndCheckSignature=function(n){return n===this.readData(4)},o.prototype.readData=function(n){this.checkOffset(n);var l=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,l},E.exports=o},{"../utils":32,"./DataReader":18}],21:[function(i,E,h){var r=i("./ArrayReader");function o(n){r.call(this,n)}i("../utils").inherits(o,r),o.prototype.readData=function(n){if(this.checkOffset(n),n===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+n);return this.index+=n,l},E.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(i,E,h){var r=i("../utils"),o=i("../support"),n=i("./ArrayReader"),l=i("./StringReader"),_=i("./NodeBufferReader"),v=i("./Uint8ArrayReader");E.exports=function(g){var y=r.getTypeOf(g);return r.checkSupport(y),y!=="string"||o.uint8array?y==="nodebuffer"?new _(g):o.uint8array?new v(r.transformTo("uint8array",g)):new n(r.transformTo("array",g)):new l(g)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(i,E,h){h.LOCAL_FILE_HEADER="PK",h.CENTRAL_FILE_HEADER="PK",h.CENTRAL_DIRECTORY_END="PK",h.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",h.ZIP64_CENTRAL_DIRECTORY_END="PK",h.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(i,E,h){var r=i("./GenericWorker"),o=i("../utils");function n(l){r.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(n,r),n.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},E.exports=n},{"../utils":32,"./GenericWorker":28}],25:[function(i,E,h){var r=i("./GenericWorker"),o=i("../crc32");function n(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}i("../utils").inherits(n,r),n.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},E.exports=n},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(i,E,h){var r=i("../utils"),o=i("./GenericWorker");function n(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}r.inherits(n,o),n.prototype.processChunk=function(l){if(l){var _=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=_+l.data.length}o.prototype.processChunk.call(this,l)},E.exports=n},{"../utils":32,"./GenericWorker":28}],27:[function(i,E,h){var r=i("../utils"),o=i("./GenericWorker");function n(l){o.call(this,"DataWorker");var _=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(v){_.dataIsReady=!0,_.data=v,_.max=v&&v.length||0,_.type=r.getTypeOf(v),_.isPaused||_._tickAndRepeat()},function(v){_.error(v)})}r.inherits(n,o),n.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},n.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},n.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},n.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,_=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,_);break;case"uint8array":l=this.data.subarray(this.index,_);break;case"array":case"nodebuffer":l=this.data.slice(this.index,_)}return this.index=_,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},E.exports=n},{"../utils":32,"./GenericWorker":28}],28:[function(i,E,h){function r(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,n){return this._listeners[o].push(n),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,n){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,n)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var n=this;return o.on("data",function(l){n.processChunk(l)}),o.on("end",function(){n.end()}),o.on("error",function(l){n.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,n){return this.extraStreamInfo[o]=n,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},E.exports=r},{}],29:[function(i,E,h){var r=i("../utils"),o=i("./ConvertWorker"),n=i("./GenericWorker"),l=i("../base64"),_=i("../support"),v=i("../external"),g=null;if(_.nodestream)try{g=i("../nodejs/NodejsStreamOutputAdapter")}catch{}function y(m,s){return new v.Promise(function(u,c){var p=[],S=m._internalType,k=m._outputType,D=m._mimeType;m.on("data",function(P,B){p.push(P),s&&s(B)}).on("error",function(P){p=[],c(P)}).on("end",function(){try{var P=function(B,j,$){switch(B){case"blob":return r.newBlob(r.transformTo("arraybuffer",j),$);case"base64":return l.encode(j);default:return r.transformTo(B,j)}}(k,function(B,j){var $,G=0,tt=null,w=0;for($=0;$<j.length;$++)w+=j[$].length;switch(B){case"string":return j.join("");case"array":return Array.prototype.concat.apply([],j);case"uint8array":for(tt=new Uint8Array(w),$=0;$<j.length;$++)tt.set(j[$],G),G+=j[$].length;return tt;case"nodebuffer":return Buffer.concat(j);default:throw new Error("concat : unsupported type '"+B+"'")}}(S,p),D);u(P)}catch(B){c(B)}p=[]}).resume()})}function a(m,s,u){var c=s;switch(s){case"blob":case"arraybuffer":c="uint8array";break;case"base64":c="string"}try{this._internalType=c,this._outputType=s,this._mimeType=u,r.checkSupport(c),this._worker=m.pipe(new o(c)),m.lock()}catch(p){this._worker=new n("error"),this._worker.error(p)}}a.prototype={accumulate:function(m){return y(this,m)},on:function(m,s){var u=this;return m==="data"?this._worker.on(m,function(c){s.call(u,c.data,c.meta)}):this._worker.on(m,function(){r.delay(s,arguments,u)}),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(m){if(r.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new g(this,{objectMode:this._outputType!=="nodebuffer"},m)}},E.exports=a},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(i,E,h){if(h.base64=!0,h.array=!0,h.string=!0,h.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",h.nodebuffer=typeof Buffer<"u",h.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")h.blob=!1;else{var r=new ArrayBuffer(0);try{h.blob=new Blob([r],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(r),h.blob=o.getBlob("application/zip").size===0}catch{h.blob=!1}}}try{h.nodestream=!!i("readable-stream").Readable}catch{h.nodestream=!1}},{"readable-stream":16}],31:[function(i,E,h){for(var r=i("./utils"),o=i("./support"),n=i("./nodejsUtils"),l=i("./stream/GenericWorker"),_=new Array(256),v=0;v<256;v++)_[v]=252<=v?6:248<=v?5:240<=v?4:224<=v?3:192<=v?2:1;_[254]=_[254]=1;function g(){l.call(this,"utf-8 decode"),this.leftOver=null}function y(){l.call(this,"utf-8 encode")}h.utf8encode=function(a){return o.nodebuffer?n.newBufferFrom(a,"utf-8"):function(m){var s,u,c,p,S,k=m.length,D=0;for(p=0;p<k;p++)(64512&(u=m.charCodeAt(p)))==55296&&p+1<k&&(64512&(c=m.charCodeAt(p+1)))==56320&&(u=65536+(u-55296<<10)+(c-56320),p++),D+=u<128?1:u<2048?2:u<65536?3:4;for(s=o.uint8array?new Uint8Array(D):new Array(D),p=S=0;S<D;p++)(64512&(u=m.charCodeAt(p)))==55296&&p+1<k&&(64512&(c=m.charCodeAt(p+1)))==56320&&(u=65536+(u-55296<<10)+(c-56320),p++),u<128?s[S++]=u:(u<2048?s[S++]=192|u>>>6:(u<65536?s[S++]=224|u>>>12:(s[S++]=240|u>>>18,s[S++]=128|u>>>12&63),s[S++]=128|u>>>6&63),s[S++]=128|63&u);return s}(a)},h.utf8decode=function(a){return o.nodebuffer?r.transformTo("nodebuffer",a).toString("utf-8"):function(m){var s,u,c,p,S=m.length,k=new Array(2*S);for(s=u=0;s<S;)if((c=m[s++])<128)k[u++]=c;else if(4<(p=_[c]))k[u++]=65533,s+=p-1;else{for(c&=p===2?31:p===3?15:7;1<p&&s<S;)c=c<<6|63&m[s++],p--;1<p?k[u++]=65533:c<65536?k[u++]=c:(c-=65536,k[u++]=55296|c>>10&1023,k[u++]=56320|1023&c)}return k.length!==u&&(k.subarray?k=k.subarray(0,u):k.length=u),r.applyFromCharCode(k)}(a=r.transformTo(o.uint8array?"uint8array":"array",a))},r.inherits(g,l),g.prototype.processChunk=function(a){var m=r.transformTo(o.uint8array?"uint8array":"array",a.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var s=m;(m=new Uint8Array(s.length+this.leftOver.length)).set(this.leftOver,0),m.set(s,this.leftOver.length)}else m=this.leftOver.concat(m);this.leftOver=null}var u=function(p,S){var k;for((S=S||p.length)>p.length&&(S=p.length),k=S-1;0<=k&&(192&p[k])==128;)k--;return k<0||k===0?S:k+_[p[k]]>S?k:S}(m),c=m;u!==m.length&&(o.uint8array?(c=m.subarray(0,u),this.leftOver=m.subarray(u,m.length)):(c=m.slice(0,u),this.leftOver=m.slice(u,m.length))),this.push({data:h.utf8decode(c),meta:a.meta})},g.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:h.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},h.Utf8DecodeWorker=g,r.inherits(y,l),y.prototype.processChunk=function(a){this.push({data:h.utf8encode(a.data),meta:a.meta})},h.Utf8EncodeWorker=y},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(i,E,h){var r=i("./support"),o=i("./base64"),n=i("./nodejsUtils"),l=i("./external");function _(s){return s}function v(s,u){for(var c=0;c<s.length;++c)u[c]=255&s.charCodeAt(c);return u}i("setimmediate"),h.newBlob=function(s,u){h.checkSupport("blob");try{return new Blob([s],{type:u})}catch{try{var c=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return c.append(s),c.getBlob(u)}catch{throw new Error("Bug : can't construct the Blob.")}}};var g={stringifyByChunk:function(s,u,c){var p=[],S=0,k=s.length;if(k<=c)return String.fromCharCode.apply(null,s);for(;S<k;)u==="array"||u==="nodebuffer"?p.push(String.fromCharCode.apply(null,s.slice(S,Math.min(S+c,k)))):p.push(String.fromCharCode.apply(null,s.subarray(S,Math.min(S+c,k)))),S+=c;return p.join("")},stringifyByChar:function(s){for(var u="",c=0;c<s.length;c++)u+=String.fromCharCode(s[c]);return u},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&String.fromCharCode.apply(null,n.allocBuffer(1)).length===1}catch{return!1}}()}};function y(s){var u=65536,c=h.getTypeOf(s),p=!0;if(c==="uint8array"?p=g.applyCanBeUsed.uint8array:c==="nodebuffer"&&(p=g.applyCanBeUsed.nodebuffer),p)for(;1<u;)try{return g.stringifyByChunk(s,c,u)}catch{u=Math.floor(u/2)}return g.stringifyByChar(s)}function a(s,u){for(var c=0;c<s.length;c++)u[c]=s[c];return u}h.applyFromCharCode=y;var m={};m.string={string:_,array:function(s){return v(s,new Array(s.length))},arraybuffer:function(s){return m.string.uint8array(s).buffer},uint8array:function(s){return v(s,new Uint8Array(s.length))},nodebuffer:function(s){return v(s,n.allocBuffer(s.length))}},m.array={string:y,array:_,arraybuffer:function(s){return new Uint8Array(s).buffer},uint8array:function(s){return new Uint8Array(s)},nodebuffer:function(s){return n.newBufferFrom(s)}},m.arraybuffer={string:function(s){return y(new Uint8Array(s))},array:function(s){return a(new Uint8Array(s),new Array(s.byteLength))},arraybuffer:_,uint8array:function(s){return new Uint8Array(s)},nodebuffer:function(s){return n.newBufferFrom(new Uint8Array(s))}},m.uint8array={string:y,array:function(s){return a(s,new Array(s.length))},arraybuffer:function(s){return s.buffer},uint8array:_,nodebuffer:function(s){return n.newBufferFrom(s)}},m.nodebuffer={string:y,array:function(s){return a(s,new Array(s.length))},arraybuffer:function(s){return m.nodebuffer.uint8array(s).buffer},uint8array:function(s){return a(s,new Uint8Array(s.length))},nodebuffer:_},h.transformTo=function(s,u){if(u=u||"",!s)return u;h.checkSupport(s);var c=h.getTypeOf(u);return m[c][s](u)},h.resolve=function(s){for(var u=s.split("/"),c=[],p=0;p<u.length;p++){var S=u[p];S==="."||S===""&&p!==0&&p!==u.length-1||(S===".."?c.pop():c.push(S))}return c.join("/")},h.getTypeOf=function(s){return typeof s=="string"?"string":Object.prototype.toString.call(s)==="[object Array]"?"array":r.nodebuffer&&n.isBuffer(s)?"nodebuffer":r.uint8array&&s instanceof Uint8Array?"uint8array":r.arraybuffer&&s instanceof ArrayBuffer?"arraybuffer":void 0},h.checkSupport=function(s){if(!r[s.toLowerCase()])throw new Error(s+" is not supported by this platform")},h.MAX_VALUE_16BITS=65535,h.MAX_VALUE_32BITS=-1,h.pretty=function(s){var u,c,p="";for(c=0;c<(s||"").length;c++)p+="\\x"+((u=s.charCodeAt(c))<16?"0":"")+u.toString(16).toUpperCase();return p},h.delay=function(s,u,c){setImmediate(function(){s.apply(c||null,u||[])})},h.inherits=function(s,u){function c(){}c.prototype=u.prototype,s.prototype=new c},h.extend=function(){var s,u,c={};for(s=0;s<arguments.length;s++)for(u in arguments[s])Object.prototype.hasOwnProperty.call(arguments[s],u)&&c[u]===void 0&&(c[u]=arguments[s][u]);return c},h.prepareContent=function(s,u,c,p,S){return l.Promise.resolve(u).then(function(k){return r.blob&&(k instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(k))!==-1)&&typeof FileReader<"u"?new l.Promise(function(D,P){var B=new FileReader;B.onload=function(j){D(j.target.result)},B.onerror=function(j){P(j.target.error)},B.readAsArrayBuffer(k)}):k}).then(function(k){var D=h.getTypeOf(k);return D?(D==="arraybuffer"?k=h.transformTo("uint8array",k):D==="string"&&(S?k=o.decode(k):c&&p!==!0&&(k=function(P){return v(P,r.uint8array?new Uint8Array(P.length):new Array(P.length))}(k))),k):l.Promise.reject(new Error("Can't read the data of '"+s+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(i,E,h){var r=i("./reader/readerFor"),o=i("./utils"),n=i("./signature"),l=i("./zipEntry"),_=i("./support");function v(g){this.files=[],this.loadOptions=g}v.prototype={checkSignature:function(g){if(!this.reader.readAndCheckSignature(g)){this.reader.index-=4;var y=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(y)+", expected "+o.pretty(g)+")")}},isSignature:function(g,y){var a=this.reader.index;this.reader.setIndex(g);var m=this.reader.readString(4)===y;return this.reader.setIndex(a),m},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var g=this.reader.readData(this.zipCommentLength),y=_.uint8array?"uint8array":"array",a=o.transformTo(y,g);this.zipComment=this.loadOptions.decodeFileName(a)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var g,y,a,m=this.zip64EndOfCentralSize-44;0<m;)g=this.reader.readInt(2),y=this.reader.readInt(4),a=this.reader.readData(y),this.zip64ExtensibleData[g]={id:g,length:y,value:a}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var g,y;for(g=0;g<this.files.length;g++)y=this.files[g],this.reader.setIndex(y.localHeaderOffset),this.checkSignature(n.LOCAL_FILE_HEADER),y.readLocalPart(this.reader),y.handleUTF8(),y.processAttributes()},readCentralDir:function(){var g;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(n.CENTRAL_FILE_HEADER);)(g=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(g);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var g=this.reader.lastIndexOfSignature(n.CENTRAL_DIRECTORY_END);if(g<0)throw this.isSignature(0,n.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(g);var y=g;if(this.checkSignature(n.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(g=this.reader.lastIndexOfSignature(n.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(g),this.checkSignature(n.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,n.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(n.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(n.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var a=this.centralDirOffset+this.centralDirSize;this.zip64&&(a+=20,a+=12+this.zip64EndOfCentralSize);var m=y-a;if(0<m)this.isSignature(y,n.CENTRAL_FILE_HEADER)||(this.reader.zero=m);else if(m<0)throw new Error("Corrupted zip: missing "+Math.abs(m)+" bytes.")},prepareReader:function(g){this.reader=r(g)},load:function(g){this.prepareReader(g),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},E.exports=v},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(i,E,h){var r=i("./reader/readerFor"),o=i("./utils"),n=i("./compressedObject"),l=i("./crc32"),_=i("./utf8"),v=i("./compressions"),g=i("./support");function y(a,m){this.options=a,this.loadOptions=m}y.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(a){var m,s;if(a.skip(22),this.fileNameLength=a.readInt(2),s=a.readInt(2),this.fileName=a.readData(this.fileNameLength),a.skip(s),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((m=function(u){for(var c in v)if(Object.prototype.hasOwnProperty.call(v,c)&&v[c].magic===u)return v[c];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new n(this.compressedSize,this.uncompressedSize,this.crc32,m,a.readData(this.compressedSize))},readCentralPart:function(a){this.versionMadeBy=a.readInt(2),a.skip(2),this.bitFlag=a.readInt(2),this.compressionMethod=a.readString(2),this.date=a.readDate(),this.crc32=a.readInt(4),this.compressedSize=a.readInt(4),this.uncompressedSize=a.readInt(4);var m=a.readInt(2);if(this.extraFieldsLength=a.readInt(2),this.fileCommentLength=a.readInt(2),this.diskNumberStart=a.readInt(2),this.internalFileAttributes=a.readInt(2),this.externalFileAttributes=a.readInt(4),this.localHeaderOffset=a.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");a.skip(m),this.readExtraFields(a),this.parseZIP64ExtraField(a),this.fileComment=a.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var a=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),a==0&&(this.dosPermissions=63&this.externalFileAttributes),a==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var a=r(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=a.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=a.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=a.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=a.readInt(4))}},readExtraFields:function(a){var m,s,u,c=a.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});a.index+4<c;)m=a.readInt(2),s=a.readInt(2),u=a.readData(s),this.extraFields[m]={id:m,length:s,value:u};a.setIndex(c)},handleUTF8:function(){var a=g.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=_.utf8decode(this.fileName),this.fileCommentStr=_.utf8decode(this.fileComment);else{var m=this.findExtraFieldUnicodePath();if(m!==null)this.fileNameStr=m;else{var s=o.transformTo(a,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(s)}var u=this.findExtraFieldUnicodeComment();if(u!==null)this.fileCommentStr=u;else{var c=o.transformTo(a,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(c)}}},findExtraFieldUnicodePath:function(){var a=this.extraFields[28789];if(a){var m=r(a.value);return m.readInt(1)!==1||l(this.fileName)!==m.readInt(4)?null:_.utf8decode(m.readData(a.length-5))}return null},findExtraFieldUnicodeComment:function(){var a=this.extraFields[25461];if(a){var m=r(a.value);return m.readInt(1)!==1||l(this.fileComment)!==m.readInt(4)?null:_.utf8decode(m.readData(a.length-5))}return null}},E.exports=y},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(i,E,h){function r(m,s,u){this.name=m,this.dir=u.dir,this.date=u.date,this.comment=u.comment,this.unixPermissions=u.unixPermissions,this.dosPermissions=u.dosPermissions,this._data=s,this._dataBinary=u.binary,this.options={compression:u.compression,compressionOptions:u.compressionOptions}}var o=i("./stream/StreamHelper"),n=i("./stream/DataWorker"),l=i("./utf8"),_=i("./compressedObject"),v=i("./stream/GenericWorker");r.prototype={internalStream:function(m){var s=null,u="string";try{if(!m)throw new Error("No output type specified.");var c=(u=m.toLowerCase())==="string"||u==="text";u!=="binarystring"&&u!=="text"||(u="string"),s=this._decompressWorker();var p=!this._dataBinary;p&&!c&&(s=s.pipe(new l.Utf8EncodeWorker)),!p&&c&&(s=s.pipe(new l.Utf8DecodeWorker))}catch(S){(s=new v("error")).error(S)}return new o(s,u,"")},async:function(m,s){return this.internalStream(m).accumulate(s)},nodeStream:function(m,s){return this.internalStream(m||"nodebuffer").toNodejsStream(s)},_compressWorker:function(m,s){if(this._data instanceof _&&this._data.compression.magic===m.magic)return this._data.getCompressedWorker();var u=this._decompressWorker();return this._dataBinary||(u=u.pipe(new l.Utf8EncodeWorker)),_.createWorkerFrom(u,m,s)},_decompressWorker:function(){return this._data instanceof _?this._data.getContentWorker():this._data instanceof v?this._data:new n(this._data)}};for(var g=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],y=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},a=0;a<g.length;a++)r.prototype[g[a]]=y;E.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(i,E,h){(function(r){var o,n,l=r.MutationObserver||r.WebKitMutationObserver;if(l){var _=0,v=new l(m),g=r.document.createTextNode("");v.observe(g,{characterData:!0}),o=function(){g.data=_=++_%2}}else if(r.setImmediate||r.MessageChannel===void 0)o="document"in r&&"onreadystatechange"in r.document.createElement("script")?function(){var s=r.document.createElement("script");s.onreadystatechange=function(){m(),s.onreadystatechange=null,s.parentNode.removeChild(s),s=null},r.document.documentElement.appendChild(s)}:function(){setTimeout(m,0)};else{var y=new r.MessageChannel;y.port1.onmessage=m,o=function(){y.port2.postMessage(0)}}var a=[];function m(){var s,u;n=!0;for(var c=a.length;c;){for(u=a,a=[],s=-1;++s<c;)u[s]();c=a.length}n=!1}E.exports=function(s){a.push(s)!==1||n||o()}}).call(this,typeof $t<"u"?$t:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(i,E,h){var r=i("immediate");function o(){}var n={},l=["REJECTED"],_=["FULFILLED"],v=["PENDING"];function g(c){if(typeof c!="function")throw new TypeError("resolver must be a function");this.state=v,this.queue=[],this.outcome=void 0,c!==o&&s(this,c)}function y(c,p,S){this.promise=c,typeof p=="function"&&(this.onFulfilled=p,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}function a(c,p,S){r(function(){var k;try{k=p(S)}catch(D){return n.reject(c,D)}k===c?n.reject(c,new TypeError("Cannot resolve promise with itself")):n.resolve(c,k)})}function m(c){var p=c&&c.then;if(c&&(typeof c=="object"||typeof c=="function")&&typeof p=="function")return function(){p.apply(c,arguments)}}function s(c,p){var S=!1;function k(B){S||(S=!0,n.reject(c,B))}function D(B){S||(S=!0,n.resolve(c,B))}var P=u(function(){p(D,k)});P.status==="error"&&k(P.value)}function u(c,p){var S={};try{S.value=c(p),S.status="success"}catch(k){S.status="error",S.value=k}return S}(E.exports=g).prototype.finally=function(c){if(typeof c!="function")return this;var p=this.constructor;return this.then(function(S){return p.resolve(c()).then(function(){return S})},function(S){return p.resolve(c()).then(function(){throw S})})},g.prototype.catch=function(c){return this.then(null,c)},g.prototype.then=function(c,p){if(typeof c!="function"&&this.state===_||typeof p!="function"&&this.state===l)return this;var S=new this.constructor(o);return this.state!==v?a(S,this.state===_?c:p,this.outcome):this.queue.push(new y(S,c,p)),S},y.prototype.callFulfilled=function(c){n.resolve(this.promise,c)},y.prototype.otherCallFulfilled=function(c){a(this.promise,this.onFulfilled,c)},y.prototype.callRejected=function(c){n.reject(this.promise,c)},y.prototype.otherCallRejected=function(c){a(this.promise,this.onRejected,c)},n.resolve=function(c,p){var S=u(m,p);if(S.status==="error")return n.reject(c,S.value);var k=S.value;if(k)s(c,k);else{c.state=_,c.outcome=p;for(var D=-1,P=c.queue.length;++D<P;)c.queue[D].callFulfilled(p)}return c},n.reject=function(c,p){c.state=l,c.outcome=p;for(var S=-1,k=c.queue.length;++S<k;)c.queue[S].callRejected(p);return c},g.resolve=function(c){return c instanceof this?c:n.resolve(new this(o),c)},g.reject=function(c){var p=new this(o);return n.reject(p,c)},g.all=function(c){var p=this;if(Object.prototype.toString.call(c)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=c.length,k=!1;if(!S)return this.resolve([]);for(var D=new Array(S),P=0,B=-1,j=new this(o);++B<S;)$(c[B],B);return j;function $(G,tt){p.resolve(G).then(function(w){D[tt]=w,++P!==S||k||(k=!0,n.resolve(j,D))},function(w){k||(k=!0,n.reject(j,w))})}},g.race=function(c){var p=this;if(Object.prototype.toString.call(c)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=c.length,k=!1;if(!S)return this.resolve([]);for(var D=-1,P=new this(o);++D<S;)B=c[D],p.resolve(B).then(function(j){k||(k=!0,n.resolve(P,j))},function(j){k||(k=!0,n.reject(P,j))});var B;return P}},{immediate:36}],38:[function(i,E,h){var r={};(0,i("./lib/utils/common").assign)(r,i("./lib/deflate"),i("./lib/inflate"),i("./lib/zlib/constants")),E.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(i,E,h){var r=i("./zlib/deflate"),o=i("./utils/common"),n=i("./utils/strings"),l=i("./zlib/messages"),_=i("./zlib/zstream"),v=Object.prototype.toString,g=0,y=-1,a=0,m=8;function s(c){if(!(this instanceof s))return new s(c);this.options=o.assign({level:y,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:a,to:""},c||{});var p=this.options;p.raw&&0<p.windowBits?p.windowBits=-p.windowBits:p.gzip&&0<p.windowBits&&p.windowBits<16&&(p.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new _,this.strm.avail_out=0;var S=r.deflateInit2(this.strm,p.level,p.method,p.windowBits,p.memLevel,p.strategy);if(S!==g)throw new Error(l[S]);if(p.header&&r.deflateSetHeader(this.strm,p.header),p.dictionary){var k;if(k=typeof p.dictionary=="string"?n.string2buf(p.dictionary):v.call(p.dictionary)==="[object ArrayBuffer]"?new Uint8Array(p.dictionary):p.dictionary,(S=r.deflateSetDictionary(this.strm,k))!==g)throw new Error(l[S]);this._dict_set=!0}}function u(c,p){var S=new s(p);if(S.push(c,!0),S.err)throw S.msg||l[S.err];return S.result}s.prototype.push=function(c,p){var S,k,D=this.strm,P=this.options.chunkSize;if(this.ended)return!1;k=p===~~p?p:p===!0?4:0,typeof c=="string"?D.input=n.string2buf(c):v.call(c)==="[object ArrayBuffer]"?D.input=new Uint8Array(c):D.input=c,D.next_in=0,D.avail_in=D.input.length;do{if(D.avail_out===0&&(D.output=new o.Buf8(P),D.next_out=0,D.avail_out=P),(S=r.deflate(D,k))!==1&&S!==g)return this.onEnd(S),!(this.ended=!0);D.avail_out!==0&&(D.avail_in!==0||k!==4&&k!==2)||(this.options.to==="string"?this.onData(n.buf2binstring(o.shrinkBuf(D.output,D.next_out))):this.onData(o.shrinkBuf(D.output,D.next_out)))}while((0<D.avail_in||D.avail_out===0)&&S!==1);return k===4?(S=r.deflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===g):k!==2||(this.onEnd(g),!(D.avail_out=0))},s.prototype.onData=function(c){this.chunks.push(c)},s.prototype.onEnd=function(c){c===g&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=c,this.msg=this.strm.msg},h.Deflate=s,h.deflate=u,h.deflateRaw=function(c,p){return(p=p||{}).raw=!0,u(c,p)},h.gzip=function(c,p){return(p=p||{}).gzip=!0,u(c,p)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(i,E,h){var r=i("./zlib/inflate"),o=i("./utils/common"),n=i("./utils/strings"),l=i("./zlib/constants"),_=i("./zlib/messages"),v=i("./zlib/zstream"),g=i("./zlib/gzheader"),y=Object.prototype.toString;function a(s){if(!(this instanceof a))return new a(s);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},s||{});var u=this.options;u.raw&&0<=u.windowBits&&u.windowBits<16&&(u.windowBits=-u.windowBits,u.windowBits===0&&(u.windowBits=-15)),!(0<=u.windowBits&&u.windowBits<16)||s&&s.windowBits||(u.windowBits+=32),15<u.windowBits&&u.windowBits<48&&(15&u.windowBits)==0&&(u.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new v,this.strm.avail_out=0;var c=r.inflateInit2(this.strm,u.windowBits);if(c!==l.Z_OK)throw new Error(_[c]);this.header=new g,r.inflateGetHeader(this.strm,this.header)}function m(s,u){var c=new a(u);if(c.push(s,!0),c.err)throw c.msg||_[c.err];return c.result}a.prototype.push=function(s,u){var c,p,S,k,D,P,B=this.strm,j=this.options.chunkSize,$=this.options.dictionary,G=!1;if(this.ended)return!1;p=u===~~u?u:u===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof s=="string"?B.input=n.binstring2buf(s):y.call(s)==="[object ArrayBuffer]"?B.input=new Uint8Array(s):B.input=s,B.next_in=0,B.avail_in=B.input.length;do{if(B.avail_out===0&&(B.output=new o.Buf8(j),B.next_out=0,B.avail_out=j),(c=r.inflate(B,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&$&&(P=typeof $=="string"?n.string2buf($):y.call($)==="[object ArrayBuffer]"?new Uint8Array($):$,c=r.inflateSetDictionary(this.strm,P)),c===l.Z_BUF_ERROR&&G===!0&&(c=l.Z_OK,G=!1),c!==l.Z_STREAM_END&&c!==l.Z_OK)return this.onEnd(c),!(this.ended=!0);B.next_out&&(B.avail_out!==0&&c!==l.Z_STREAM_END&&(B.avail_in!==0||p!==l.Z_FINISH&&p!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(S=n.utf8border(B.output,B.next_out),k=B.next_out-S,D=n.buf2string(B.output,S),B.next_out=k,B.avail_out=j-k,k&&o.arraySet(B.output,B.output,S,k,0),this.onData(D)):this.onData(o.shrinkBuf(B.output,B.next_out)))),B.avail_in===0&&B.avail_out===0&&(G=!0)}while((0<B.avail_in||B.avail_out===0)&&c!==l.Z_STREAM_END);return c===l.Z_STREAM_END&&(p=l.Z_FINISH),p===l.Z_FINISH?(c=r.inflateEnd(this.strm),this.onEnd(c),this.ended=!0,c===l.Z_OK):p!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(B.avail_out=0))},a.prototype.onData=function(s){this.chunks.push(s)},a.prototype.onEnd=function(s){s===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=s,this.msg=this.strm.msg},h.Inflate=a,h.inflate=m,h.inflateRaw=function(s,u){return(u=u||{}).raw=!0,m(s,u)},h.ungzip=m},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(i,E,h){var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";h.assign=function(l){for(var _=Array.prototype.slice.call(arguments,1);_.length;){var v=_.shift();if(v){if(typeof v!="object")throw new TypeError(v+"must be non-object");for(var g in v)v.hasOwnProperty(g)&&(l[g]=v[g])}}return l},h.shrinkBuf=function(l,_){return l.length===_?l:l.subarray?l.subarray(0,_):(l.length=_,l)};var o={arraySet:function(l,_,v,g,y){if(_.subarray&&l.subarray)l.set(_.subarray(v,v+g),y);else for(var a=0;a<g;a++)l[y+a]=_[v+a]},flattenChunks:function(l){var _,v,g,y,a,m;for(_=g=0,v=l.length;_<v;_++)g+=l[_].length;for(m=new Uint8Array(g),_=y=0,v=l.length;_<v;_++)a=l[_],m.set(a,y),y+=a.length;return m}},n={arraySet:function(l,_,v,g,y){for(var a=0;a<g;a++)l[y+a]=_[v+a]},flattenChunks:function(l){return[].concat.apply([],l)}};h.setTyped=function(l){l?(h.Buf8=Uint8Array,h.Buf16=Uint16Array,h.Buf32=Int32Array,h.assign(h,o)):(h.Buf8=Array,h.Buf16=Array,h.Buf32=Array,h.assign(h,n))},h.setTyped(r)},{}],42:[function(i,E,h){var r=i("./common"),o=!0,n=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{n=!1}for(var l=new r.Buf8(256),_=0;_<256;_++)l[_]=252<=_?6:248<=_?5:240<=_?4:224<=_?3:192<=_?2:1;function v(g,y){if(y<65537&&(g.subarray&&n||!g.subarray&&o))return String.fromCharCode.apply(null,r.shrinkBuf(g,y));for(var a="",m=0;m<y;m++)a+=String.fromCharCode(g[m]);return a}l[254]=l[254]=1,h.string2buf=function(g){var y,a,m,s,u,c=g.length,p=0;for(s=0;s<c;s++)(64512&(a=g.charCodeAt(s)))==55296&&s+1<c&&(64512&(m=g.charCodeAt(s+1)))==56320&&(a=65536+(a-55296<<10)+(m-56320),s++),p+=a<128?1:a<2048?2:a<65536?3:4;for(y=new r.Buf8(p),s=u=0;u<p;s++)(64512&(a=g.charCodeAt(s)))==55296&&s+1<c&&(64512&(m=g.charCodeAt(s+1)))==56320&&(a=65536+(a-55296<<10)+(m-56320),s++),a<128?y[u++]=a:(a<2048?y[u++]=192|a>>>6:(a<65536?y[u++]=224|a>>>12:(y[u++]=240|a>>>18,y[u++]=128|a>>>12&63),y[u++]=128|a>>>6&63),y[u++]=128|63&a);return y},h.buf2binstring=function(g){return v(g,g.length)},h.binstring2buf=function(g){for(var y=new r.Buf8(g.length),a=0,m=y.length;a<m;a++)y[a]=g.charCodeAt(a);return y},h.buf2string=function(g,y){var a,m,s,u,c=y||g.length,p=new Array(2*c);for(a=m=0;a<c;)if((s=g[a++])<128)p[m++]=s;else if(4<(u=l[s]))p[m++]=65533,a+=u-1;else{for(s&=u===2?31:u===3?15:7;1<u&&a<c;)s=s<<6|63&g[a++],u--;1<u?p[m++]=65533:s<65536?p[m++]=s:(s-=65536,p[m++]=55296|s>>10&1023,p[m++]=56320|1023&s)}return v(p,m)},h.utf8border=function(g,y){var a;for((y=y||g.length)>g.length&&(y=g.length),a=y-1;0<=a&&(192&g[a])==128;)a--;return a<0||a===0?y:a+l[g[a]]>y?a:y}},{"./common":41}],43:[function(i,E,h){E.exports=function(r,o,n,l){for(var _=65535&r|0,v=r>>>16&65535|0,g=0;n!==0;){for(n-=g=2e3<n?2e3:n;v=v+(_=_+o[l++]|0)|0,--g;);_%=65521,v%=65521}return _|v<<16|0}},{}],44:[function(i,E,h){E.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(i,E,h){var r=function(){for(var o,n=[],l=0;l<256;l++){o=l;for(var _=0;_<8;_++)o=1&o?3988292384^o>>>1:o>>>1;n[l]=o}return n}();E.exports=function(o,n,l,_){var v=r,g=_+l;o^=-1;for(var y=_;y<g;y++)o=o>>>8^v[255&(o^n[y])];return-1^o}},{}],46:[function(i,E,h){var r,o=i("../utils/common"),n=i("./trees"),l=i("./adler32"),_=i("./crc32"),v=i("./messages"),g=0,y=4,a=0,m=-2,s=-1,u=4,c=2,p=8,S=9,k=286,D=30,P=19,B=2*k+1,j=15,$=3,G=258,tt=G+$+1,w=42,R=113,e=1,V=2,nt=3,L=4;function rt(t,T){return t.msg=v[T],T}function Z(t){return(t<<1)-(4<t?9:0)}function et(t){for(var T=t.length;0<=--T;)t[T]=0}function O(t){var T=t.state,I=T.pending;I>t.avail_out&&(I=t.avail_out),I!==0&&(o.arraySet(t.output,T.pending_buf,T.pending_out,I,t.next_out),t.next_out+=I,T.pending_out+=I,t.total_out+=I,t.avail_out-=I,T.pending-=I,T.pending===0&&(T.pending_out=0))}function A(t,T){n._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,T),t.block_start=t.strstart,O(t.strm)}function Q(t,T){t.pending_buf[t.pending++]=T}function q(t,T){t.pending_buf[t.pending++]=T>>>8&255,t.pending_buf[t.pending++]=255&T}function Y(t,T){var I,f,d=t.max_chain_length,x=t.strstart,U=t.prev_length,N=t.nice_match,z=t.strstart>t.w_size-tt?t.strstart-(t.w_size-tt):0,M=t.window,X=t.w_mask,K=t.prev,J=t.strstart+G,ct=M[x+U-1],at=M[x+U];t.prev_length>=t.good_match&&(d>>=2),N>t.lookahead&&(N=t.lookahead);do if(M[(I=T)+U]===at&&M[I+U-1]===ct&&M[I]===M[x]&&M[++I]===M[x+1]){x+=2,I++;do;while(M[++x]===M[++I]&&M[++x]===M[++I]&&M[++x]===M[++I]&&M[++x]===M[++I]&&M[++x]===M[++I]&&M[++x]===M[++I]&&M[++x]===M[++I]&&M[++x]===M[++I]&&x<J);if(f=G-(J-x),x=J-G,U<f){if(t.match_start=T,N<=(U=f))break;ct=M[x+U-1],at=M[x+U]}}while((T=K[T&X])>z&&--d!=0);return U<=t.lookahead?U:t.lookahead}function ht(t){var T,I,f,d,x,U,N,z,M,X,K=t.w_size;do{if(d=t.window_size-t.lookahead-t.strstart,t.strstart>=K+(K-tt)){for(o.arraySet(t.window,t.window,K,K,0),t.match_start-=K,t.strstart-=K,t.block_start-=K,T=I=t.hash_size;f=t.head[--T],t.head[T]=K<=f?f-K:0,--I;);for(T=I=K;f=t.prev[--T],t.prev[T]=K<=f?f-K:0,--I;);d+=K}if(t.strm.avail_in===0)break;if(U=t.strm,N=t.window,z=t.strstart+t.lookahead,M=d,X=void 0,X=U.avail_in,M<X&&(X=M),I=X===0?0:(U.avail_in-=X,o.arraySet(N,U.input,U.next_in,X,z),U.state.wrap===1?U.adler=l(U.adler,N,X,z):U.state.wrap===2&&(U.adler=_(U.adler,N,X,z)),U.next_in+=X,U.total_in+=X,X),t.lookahead+=I,t.lookahead+t.insert>=$)for(x=t.strstart-t.insert,t.ins_h=t.window[x],t.ins_h=(t.ins_h<<t.hash_shift^t.window[x+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[x+$-1])&t.hash_mask,t.prev[x&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=x,x++,t.insert--,!(t.lookahead+t.insert<$)););}while(t.lookahead<tt&&t.strm.avail_in!==0)}function gt(t,T){for(var I,f;;){if(t.lookahead<tt){if(ht(t),t.lookahead<tt&&T===g)return e;if(t.lookahead===0)break}if(I=0,t.lookahead>=$&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+$-1])&t.hash_mask,I=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),I!==0&&t.strstart-I<=t.w_size-tt&&(t.match_length=Y(t,I)),t.match_length>=$)if(f=n._tr_tally(t,t.strstart-t.match_start,t.match_length-$),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=$){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+$-1])&t.hash_mask,I=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,--t.match_length!=0;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else f=n._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(f&&(A(t,!1),t.strm.avail_out===0))return e}return t.insert=t.strstart<$-1?t.strstart:$-1,T===y?(A(t,!0),t.strm.avail_out===0?nt:L):t.last_lit&&(A(t,!1),t.strm.avail_out===0)?e:V}function st(t,T){for(var I,f,d;;){if(t.lookahead<tt){if(ht(t),t.lookahead<tt&&T===g)return e;if(t.lookahead===0)break}if(I=0,t.lookahead>=$&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+$-1])&t.hash_mask,I=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=$-1,I!==0&&t.prev_length<t.max_lazy_match&&t.strstart-I<=t.w_size-tt&&(t.match_length=Y(t,I),t.match_length<=5&&(t.strategy===1||t.match_length===$&&4096<t.strstart-t.match_start)&&(t.match_length=$-1)),t.prev_length>=$&&t.match_length<=t.prev_length){for(d=t.strstart+t.lookahead-$,f=n._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-$),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=d&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+$-1])&t.hash_mask,I=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),--t.prev_length!=0;);if(t.match_available=0,t.match_length=$-1,t.strstart++,f&&(A(t,!1),t.strm.avail_out===0))return e}else if(t.match_available){if((f=n._tr_tally(t,0,t.window[t.strstart-1]))&&A(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return e}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(f=n._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<$-1?t.strstart:$-1,T===y?(A(t,!0),t.strm.avail_out===0?nt:L):t.last_lit&&(A(t,!1),t.strm.avail_out===0)?e:V}function lt(t,T,I,f,d){this.good_length=t,this.max_lazy=T,this.nice_length=I,this.max_chain=f,this.func=d}function mt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=p,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*B),this.dyn_dtree=new o.Buf16(2*(2*D+1)),this.bl_tree=new o.Buf16(2*(2*P+1)),et(this.dyn_ltree),et(this.dyn_dtree),et(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(j+1),this.heap=new o.Buf16(2*k+1),et(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*k+1),et(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ut(t){var T;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=c,(T=t.state).pending=0,T.pending_out=0,T.wrap<0&&(T.wrap=-T.wrap),T.status=T.wrap?w:R,t.adler=T.wrap===2?0:1,T.last_flush=g,n._tr_init(T),a):rt(t,m)}function kt(t){var T=ut(t);return T===a&&function(I){I.window_size=2*I.w_size,et(I.head),I.max_lazy_match=r[I.level].max_lazy,I.good_match=r[I.level].good_length,I.nice_match=r[I.level].nice_length,I.max_chain_length=r[I.level].max_chain,I.strstart=0,I.block_start=0,I.lookahead=0,I.insert=0,I.match_length=I.prev_length=$-1,I.match_available=0,I.ins_h=0}(t.state),T}function wt(t,T,I,f,d,x){if(!t)return m;var U=1;if(T===s&&(T=6),f<0?(U=0,f=-f):15<f&&(U=2,f-=16),d<1||S<d||I!==p||f<8||15<f||T<0||9<T||x<0||u<x)return rt(t,m);f===8&&(f=9);var N=new mt;return(t.state=N).strm=t,N.wrap=U,N.gzhead=null,N.w_bits=f,N.w_size=1<<N.w_bits,N.w_mask=N.w_size-1,N.hash_bits=d+7,N.hash_size=1<<N.hash_bits,N.hash_mask=N.hash_size-1,N.hash_shift=~~((N.hash_bits+$-1)/$),N.window=new o.Buf8(2*N.w_size),N.head=new o.Buf16(N.hash_size),N.prev=new o.Buf16(N.w_size),N.lit_bufsize=1<<d+6,N.pending_buf_size=4*N.lit_bufsize,N.pending_buf=new o.Buf8(N.pending_buf_size),N.d_buf=1*N.lit_bufsize,N.l_buf=3*N.lit_bufsize,N.level=T,N.strategy=x,N.method=I,kt(t)}r=[new lt(0,0,0,0,function(t,T){var I=65535;for(I>t.pending_buf_size-5&&(I=t.pending_buf_size-5);;){if(t.lookahead<=1){if(ht(t),t.lookahead===0&&T===g)return e;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var f=t.block_start+I;if((t.strstart===0||t.strstart>=f)&&(t.lookahead=t.strstart-f,t.strstart=f,A(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-tt&&(A(t,!1),t.strm.avail_out===0))return e}return t.insert=0,T===y?(A(t,!0),t.strm.avail_out===0?nt:L):(t.strstart>t.block_start&&(A(t,!1),t.strm.avail_out),e)}),new lt(4,4,8,4,gt),new lt(4,5,16,8,gt),new lt(4,6,32,32,gt),new lt(4,4,16,16,st),new lt(8,16,32,32,st),new lt(8,16,128,128,st),new lt(8,32,128,256,st),new lt(32,128,258,1024,st),new lt(32,258,258,4096,st)],h.deflateInit=function(t,T){return wt(t,T,p,15,8,0)},h.deflateInit2=wt,h.deflateReset=kt,h.deflateResetKeep=ut,h.deflateSetHeader=function(t,T){return t&&t.state?t.state.wrap!==2?m:(t.state.gzhead=T,a):m},h.deflate=function(t,T){var I,f,d,x;if(!t||!t.state||5<T||T<0)return t?rt(t,m):m;if(f=t.state,!t.output||!t.input&&t.avail_in!==0||f.status===666&&T!==y)return rt(t,t.avail_out===0?-5:m);if(f.strm=t,I=f.last_flush,f.last_flush=T,f.status===w)if(f.wrap===2)t.adler=0,Q(f,31),Q(f,139),Q(f,8),f.gzhead?(Q(f,(f.gzhead.text?1:0)+(f.gzhead.hcrc?2:0)+(f.gzhead.extra?4:0)+(f.gzhead.name?8:0)+(f.gzhead.comment?16:0)),Q(f,255&f.gzhead.time),Q(f,f.gzhead.time>>8&255),Q(f,f.gzhead.time>>16&255),Q(f,f.gzhead.time>>24&255),Q(f,f.level===9?2:2<=f.strategy||f.level<2?4:0),Q(f,255&f.gzhead.os),f.gzhead.extra&&f.gzhead.extra.length&&(Q(f,255&f.gzhead.extra.length),Q(f,f.gzhead.extra.length>>8&255)),f.gzhead.hcrc&&(t.adler=_(t.adler,f.pending_buf,f.pending,0)),f.gzindex=0,f.status=69):(Q(f,0),Q(f,0),Q(f,0),Q(f,0),Q(f,0),Q(f,f.level===9?2:2<=f.strategy||f.level<2?4:0),Q(f,3),f.status=R);else{var U=p+(f.w_bits-8<<4)<<8;U|=(2<=f.strategy||f.level<2?0:f.level<6?1:f.level===6?2:3)<<6,f.strstart!==0&&(U|=32),U+=31-U%31,f.status=R,q(f,U),f.strstart!==0&&(q(f,t.adler>>>16),q(f,65535&t.adler)),t.adler=1}if(f.status===69)if(f.gzhead.extra){for(d=f.pending;f.gzindex<(65535&f.gzhead.extra.length)&&(f.pending!==f.pending_buf_size||(f.gzhead.hcrc&&f.pending>d&&(t.adler=_(t.adler,f.pending_buf,f.pending-d,d)),O(t),d=f.pending,f.pending!==f.pending_buf_size));)Q(f,255&f.gzhead.extra[f.gzindex]),f.gzindex++;f.gzhead.hcrc&&f.pending>d&&(t.adler=_(t.adler,f.pending_buf,f.pending-d,d)),f.gzindex===f.gzhead.extra.length&&(f.gzindex=0,f.status=73)}else f.status=73;if(f.status===73)if(f.gzhead.name){d=f.pending;do{if(f.pending===f.pending_buf_size&&(f.gzhead.hcrc&&f.pending>d&&(t.adler=_(t.adler,f.pending_buf,f.pending-d,d)),O(t),d=f.pending,f.pending===f.pending_buf_size)){x=1;break}x=f.gzindex<f.gzhead.name.length?255&f.gzhead.name.charCodeAt(f.gzindex++):0,Q(f,x)}while(x!==0);f.gzhead.hcrc&&f.pending>d&&(t.adler=_(t.adler,f.pending_buf,f.pending-d,d)),x===0&&(f.gzindex=0,f.status=91)}else f.status=91;if(f.status===91)if(f.gzhead.comment){d=f.pending;do{if(f.pending===f.pending_buf_size&&(f.gzhead.hcrc&&f.pending>d&&(t.adler=_(t.adler,f.pending_buf,f.pending-d,d)),O(t),d=f.pending,f.pending===f.pending_buf_size)){x=1;break}x=f.gzindex<f.gzhead.comment.length?255&f.gzhead.comment.charCodeAt(f.gzindex++):0,Q(f,x)}while(x!==0);f.gzhead.hcrc&&f.pending>d&&(t.adler=_(t.adler,f.pending_buf,f.pending-d,d)),x===0&&(f.status=103)}else f.status=103;if(f.status===103&&(f.gzhead.hcrc?(f.pending+2>f.pending_buf_size&&O(t),f.pending+2<=f.pending_buf_size&&(Q(f,255&t.adler),Q(f,t.adler>>8&255),t.adler=0,f.status=R)):f.status=R),f.pending!==0){if(O(t),t.avail_out===0)return f.last_flush=-1,a}else if(t.avail_in===0&&Z(T)<=Z(I)&&T!==y)return rt(t,-5);if(f.status===666&&t.avail_in!==0)return rt(t,-5);if(t.avail_in!==0||f.lookahead!==0||T!==g&&f.status!==666){var N=f.strategy===2?function(z,M){for(var X;;){if(z.lookahead===0&&(ht(z),z.lookahead===0)){if(M===g)return e;break}if(z.match_length=0,X=n._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++,X&&(A(z,!1),z.strm.avail_out===0))return e}return z.insert=0,M===y?(A(z,!0),z.strm.avail_out===0?nt:L):z.last_lit&&(A(z,!1),z.strm.avail_out===0)?e:V}(f,T):f.strategy===3?function(z,M){for(var X,K,J,ct,at=z.window;;){if(z.lookahead<=G){if(ht(z),z.lookahead<=G&&M===g)return e;if(z.lookahead===0)break}if(z.match_length=0,z.lookahead>=$&&0<z.strstart&&(K=at[J=z.strstart-1])===at[++J]&&K===at[++J]&&K===at[++J]){ct=z.strstart+G;do;while(K===at[++J]&&K===at[++J]&&K===at[++J]&&K===at[++J]&&K===at[++J]&&K===at[++J]&&K===at[++J]&&K===at[++J]&&J<ct);z.match_length=G-(ct-J),z.match_length>z.lookahead&&(z.match_length=z.lookahead)}if(z.match_length>=$?(X=n._tr_tally(z,1,z.match_length-$),z.lookahead-=z.match_length,z.strstart+=z.match_length,z.match_length=0):(X=n._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++),X&&(A(z,!1),z.strm.avail_out===0))return e}return z.insert=0,M===y?(A(z,!0),z.strm.avail_out===0?nt:L):z.last_lit&&(A(z,!1),z.strm.avail_out===0)?e:V}(f,T):r[f.level].func(f,T);if(N!==nt&&N!==L||(f.status=666),N===e||N===nt)return t.avail_out===0&&(f.last_flush=-1),a;if(N===V&&(T===1?n._tr_align(f):T!==5&&(n._tr_stored_block(f,0,0,!1),T===3&&(et(f.head),f.lookahead===0&&(f.strstart=0,f.block_start=0,f.insert=0))),O(t),t.avail_out===0))return f.last_flush=-1,a}return T!==y?a:f.wrap<=0?1:(f.wrap===2?(Q(f,255&t.adler),Q(f,t.adler>>8&255),Q(f,t.adler>>16&255),Q(f,t.adler>>24&255),Q(f,255&t.total_in),Q(f,t.total_in>>8&255),Q(f,t.total_in>>16&255),Q(f,t.total_in>>24&255)):(q(f,t.adler>>>16),q(f,65535&t.adler)),O(t),0<f.wrap&&(f.wrap=-f.wrap),f.pending!==0?a:1)},h.deflateEnd=function(t){var T;return t&&t.state?(T=t.state.status)!==w&&T!==69&&T!==73&&T!==91&&T!==103&&T!==R&&T!==666?rt(t,m):(t.state=null,T===R?rt(t,-3):a):m},h.deflateSetDictionary=function(t,T){var I,f,d,x,U,N,z,M,X=T.length;if(!t||!t.state||(x=(I=t.state).wrap)===2||x===1&&I.status!==w||I.lookahead)return m;for(x===1&&(t.adler=l(t.adler,T,X,0)),I.wrap=0,X>=I.w_size&&(x===0&&(et(I.head),I.strstart=0,I.block_start=0,I.insert=0),M=new o.Buf8(I.w_size),o.arraySet(M,T,X-I.w_size,I.w_size,0),T=M,X=I.w_size),U=t.avail_in,N=t.next_in,z=t.input,t.avail_in=X,t.next_in=0,t.input=T,ht(I);I.lookahead>=$;){for(f=I.strstart,d=I.lookahead-($-1);I.ins_h=(I.ins_h<<I.hash_shift^I.window[f+$-1])&I.hash_mask,I.prev[f&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=f,f++,--d;);I.strstart=f,I.lookahead=$-1,ht(I)}return I.strstart+=I.lookahead,I.block_start=I.strstart,I.insert=I.lookahead,I.lookahead=0,I.match_length=I.prev_length=$-1,I.match_available=0,t.next_in=N,t.input=z,t.avail_in=U,I.wrap=x,a},h.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(i,E,h){E.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(i,E,h){E.exports=function(r,o){var n,l,_,v,g,y,a,m,s,u,c,p,S,k,D,P,B,j,$,G,tt,w,R,e,V;n=r.state,l=r.next_in,e=r.input,_=l+(r.avail_in-5),v=r.next_out,V=r.output,g=v-(o-r.avail_out),y=v+(r.avail_out-257),a=n.dmax,m=n.wsize,s=n.whave,u=n.wnext,c=n.window,p=n.hold,S=n.bits,k=n.lencode,D=n.distcode,P=(1<<n.lenbits)-1,B=(1<<n.distbits)-1;t:do{S<15&&(p+=e[l++]<<S,S+=8,p+=e[l++]<<S,S+=8),j=k[p&P];e:for(;;){if(p>>>=$=j>>>24,S-=$,($=j>>>16&255)===0)V[v++]=65535&j;else{if(!(16&$)){if((64&$)==0){j=k[(65535&j)+(p&(1<<$)-1)];continue e}if(32&$){n.mode=12;break t}r.msg="invalid literal/length code",n.mode=30;break t}G=65535&j,($&=15)&&(S<$&&(p+=e[l++]<<S,S+=8),G+=p&(1<<$)-1,p>>>=$,S-=$),S<15&&(p+=e[l++]<<S,S+=8,p+=e[l++]<<S,S+=8),j=D[p&B];n:for(;;){if(p>>>=$=j>>>24,S-=$,!(16&($=j>>>16&255))){if((64&$)==0){j=D[(65535&j)+(p&(1<<$)-1)];continue n}r.msg="invalid distance code",n.mode=30;break t}if(tt=65535&j,S<($&=15)&&(p+=e[l++]<<S,(S+=8)<$&&(p+=e[l++]<<S,S+=8)),a<(tt+=p&(1<<$)-1)){r.msg="invalid distance too far back",n.mode=30;break t}if(p>>>=$,S-=$,($=v-g)<tt){if(s<($=tt-$)&&n.sane){r.msg="invalid distance too far back",n.mode=30;break t}if(R=c,(w=0)===u){if(w+=m-$,$<G){for(G-=$;V[v++]=c[w++],--$;);w=v-tt,R=V}}else if(u<$){if(w+=m+u-$,($-=u)<G){for(G-=$;V[v++]=c[w++],--$;);if(w=0,u<G){for(G-=$=u;V[v++]=c[w++],--$;);w=v-tt,R=V}}}else if(w+=u-$,$<G){for(G-=$;V[v++]=c[w++],--$;);w=v-tt,R=V}for(;2<G;)V[v++]=R[w++],V[v++]=R[w++],V[v++]=R[w++],G-=3;G&&(V[v++]=R[w++],1<G&&(V[v++]=R[w++]))}else{for(w=v-tt;V[v++]=V[w++],V[v++]=V[w++],V[v++]=V[w++],2<(G-=3););G&&(V[v++]=V[w++],1<G&&(V[v++]=V[w++]))}break}}break}}while(l<_&&v<y);l-=G=S>>3,p&=(1<<(S-=G<<3))-1,r.next_in=l,r.next_out=v,r.avail_in=l<_?_-l+5:5-(l-_),r.avail_out=v<y?y-v+257:257-(v-y),n.hold=p,n.bits=S}},{}],49:[function(i,E,h){var r=i("../utils/common"),o=i("./adler32"),n=i("./crc32"),l=i("./inffast"),_=i("./inftrees"),v=1,g=2,y=0,a=-2,m=1,s=852,u=592;function c(w){return(w>>>24&255)+(w>>>8&65280)+((65280&w)<<8)+((255&w)<<24)}function p(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function S(w){var R;return w&&w.state?(R=w.state,w.total_in=w.total_out=R.total=0,w.msg="",R.wrap&&(w.adler=1&R.wrap),R.mode=m,R.last=0,R.havedict=0,R.dmax=32768,R.head=null,R.hold=0,R.bits=0,R.lencode=R.lendyn=new r.Buf32(s),R.distcode=R.distdyn=new r.Buf32(u),R.sane=1,R.back=-1,y):a}function k(w){var R;return w&&w.state?((R=w.state).wsize=0,R.whave=0,R.wnext=0,S(w)):a}function D(w,R){var e,V;return w&&w.state?(V=w.state,R<0?(e=0,R=-R):(e=1+(R>>4),R<48&&(R&=15)),R&&(R<8||15<R)?a:(V.window!==null&&V.wbits!==R&&(V.window=null),V.wrap=e,V.wbits=R,k(w))):a}function P(w,R){var e,V;return w?(V=new p,(w.state=V).window=null,(e=D(w,R))!==y&&(w.state=null),e):a}var B,j,$=!0;function G(w){if($){var R;for(B=new r.Buf32(512),j=new r.Buf32(32),R=0;R<144;)w.lens[R++]=8;for(;R<256;)w.lens[R++]=9;for(;R<280;)w.lens[R++]=7;for(;R<288;)w.lens[R++]=8;for(_(v,w.lens,0,288,B,0,w.work,{bits:9}),R=0;R<32;)w.lens[R++]=5;_(g,w.lens,0,32,j,0,w.work,{bits:5}),$=!1}w.lencode=B,w.lenbits=9,w.distcode=j,w.distbits=5}function tt(w,R,e,V){var nt,L=w.state;return L.window===null&&(L.wsize=1<<L.wbits,L.wnext=0,L.whave=0,L.window=new r.Buf8(L.wsize)),V>=L.wsize?(r.arraySet(L.window,R,e-L.wsize,L.wsize,0),L.wnext=0,L.whave=L.wsize):(V<(nt=L.wsize-L.wnext)&&(nt=V),r.arraySet(L.window,R,e-V,nt,L.wnext),(V-=nt)?(r.arraySet(L.window,R,e-V,V,0),L.wnext=V,L.whave=L.wsize):(L.wnext+=nt,L.wnext===L.wsize&&(L.wnext=0),L.whave<L.wsize&&(L.whave+=nt))),0}h.inflateReset=k,h.inflateReset2=D,h.inflateResetKeep=S,h.inflateInit=function(w){return P(w,15)},h.inflateInit2=P,h.inflate=function(w,R){var e,V,nt,L,rt,Z,et,O,A,Q,q,Y,ht,gt,st,lt,mt,ut,kt,wt,t,T,I,f,d=0,x=new r.Buf8(4),U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!w||!w.state||!w.output||!w.input&&w.avail_in!==0)return a;(e=w.state).mode===12&&(e.mode=13),rt=w.next_out,nt=w.output,et=w.avail_out,L=w.next_in,V=w.input,Z=w.avail_in,O=e.hold,A=e.bits,Q=Z,q=et,T=y;t:for(;;)switch(e.mode){case m:if(e.wrap===0){e.mode=13;break}for(;A<16;){if(Z===0)break t;Z--,O+=V[L++]<<A,A+=8}if(2&e.wrap&&O===35615){x[e.check=0]=255&O,x[1]=O>>>8&255,e.check=n(e.check,x,2,0),A=O=0,e.mode=2;break}if(e.flags=0,e.head&&(e.head.done=!1),!(1&e.wrap)||(((255&O)<<8)+(O>>8))%31){w.msg="incorrect header check",e.mode=30;break}if((15&O)!=8){w.msg="unknown compression method",e.mode=30;break}if(A-=4,t=8+(15&(O>>>=4)),e.wbits===0)e.wbits=t;else if(t>e.wbits){w.msg="invalid window size",e.mode=30;break}e.dmax=1<<t,w.adler=e.check=1,e.mode=512&O?10:12,A=O=0;break;case 2:for(;A<16;){if(Z===0)break t;Z--,O+=V[L++]<<A,A+=8}if(e.flags=O,(255&e.flags)!=8){w.msg="unknown compression method",e.mode=30;break}if(57344&e.flags){w.msg="unknown header flags set",e.mode=30;break}e.head&&(e.head.text=O>>8&1),512&e.flags&&(x[0]=255&O,x[1]=O>>>8&255,e.check=n(e.check,x,2,0)),A=O=0,e.mode=3;case 3:for(;A<32;){if(Z===0)break t;Z--,O+=V[L++]<<A,A+=8}e.head&&(e.head.time=O),512&e.flags&&(x[0]=255&O,x[1]=O>>>8&255,x[2]=O>>>16&255,x[3]=O>>>24&255,e.check=n(e.check,x,4,0)),A=O=0,e.mode=4;case 4:for(;A<16;){if(Z===0)break t;Z--,O+=V[L++]<<A,A+=8}e.head&&(e.head.xflags=255&O,e.head.os=O>>8),512&e.flags&&(x[0]=255&O,x[1]=O>>>8&255,e.check=n(e.check,x,2,0)),A=O=0,e.mode=5;case 5:if(1024&e.flags){for(;A<16;){if(Z===0)break t;Z--,O+=V[L++]<<A,A+=8}e.length=O,e.head&&(e.head.extra_len=O),512&e.flags&&(x[0]=255&O,x[1]=O>>>8&255,e.check=n(e.check,x,2,0)),A=O=0}else e.head&&(e.head.extra=null);e.mode=6;case 6:if(1024&e.flags&&(Z<(Y=e.length)&&(Y=Z),Y&&(e.head&&(t=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Array(e.head.extra_len)),r.arraySet(e.head.extra,V,L,Y,t)),512&e.flags&&(e.check=n(e.check,V,Y,L)),Z-=Y,L+=Y,e.length-=Y),e.length))break t;e.length=0,e.mode=7;case 7:if(2048&e.flags){if(Z===0)break t;for(Y=0;t=V[L+Y++],e.head&&t&&e.length<65536&&(e.head.name+=String.fromCharCode(t)),t&&Y<Z;);if(512&e.flags&&(e.check=n(e.check,V,Y,L)),Z-=Y,L+=Y,t)break t}else e.head&&(e.head.name=null);e.length=0,e.mode=8;case 8:if(4096&e.flags){if(Z===0)break t;for(Y=0;t=V[L+Y++],e.head&&t&&e.length<65536&&(e.head.comment+=String.fromCharCode(t)),t&&Y<Z;);if(512&e.flags&&(e.check=n(e.check,V,Y,L)),Z-=Y,L+=Y,t)break t}else e.head&&(e.head.comment=null);e.mode=9;case 9:if(512&e.flags){for(;A<16;){if(Z===0)break t;Z--,O+=V[L++]<<A,A+=8}if(O!==(65535&e.check)){w.msg="header crc mismatch",e.mode=30;break}A=O=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),w.adler=e.check=0,e.mode=12;break;case 10:for(;A<32;){if(Z===0)break t;Z--,O+=V[L++]<<A,A+=8}w.adler=e.check=c(O),A=O=0,e.mode=11;case 11:if(e.havedict===0)return w.next_out=rt,w.avail_out=et,w.next_in=L,w.avail_in=Z,e.hold=O,e.bits=A,2;w.adler=e.check=1,e.mode=12;case 12:if(R===5||R===6)break t;case 13:if(e.last){O>>>=7&A,A-=7&A,e.mode=27;break}for(;A<3;){if(Z===0)break t;Z--,O+=V[L++]<<A,A+=8}switch(e.last=1&O,A-=1,3&(O>>>=1)){case 0:e.mode=14;break;case 1:if(G(e),e.mode=20,R!==6)break;O>>>=2,A-=2;break t;case 2:e.mode=17;break;case 3:w.msg="invalid block type",e.mode=30}O>>>=2,A-=2;break;case 14:for(O>>>=7&A,A-=7&A;A<32;){if(Z===0)break t;Z--,O+=V[L++]<<A,A+=8}if((65535&O)!=(O>>>16^65535)){w.msg="invalid stored block lengths",e.mode=30;break}if(e.length=65535&O,A=O=0,e.mode=15,R===6)break t;case 15:e.mode=16;case 16:if(Y=e.length){if(Z<Y&&(Y=Z),et<Y&&(Y=et),Y===0)break t;r.arraySet(nt,V,L,Y,rt),Z-=Y,L+=Y,et-=Y,rt+=Y,e.length-=Y;break}e.mode=12;break;case 17:for(;A<14;){if(Z===0)break t;Z--,O+=V[L++]<<A,A+=8}if(e.nlen=257+(31&O),O>>>=5,A-=5,e.ndist=1+(31&O),O>>>=5,A-=5,e.ncode=4+(15&O),O>>>=4,A-=4,286<e.nlen||30<e.ndist){w.msg="too many length or distance symbols",e.mode=30;break}e.have=0,e.mode=18;case 18:for(;e.have<e.ncode;){for(;A<3;){if(Z===0)break t;Z--,O+=V[L++]<<A,A+=8}e.lens[U[e.have++]]=7&O,O>>>=3,A-=3}for(;e.have<19;)e.lens[U[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,I={bits:e.lenbits},T=_(0,e.lens,0,19,e.lencode,0,e.work,I),e.lenbits=I.bits,T){w.msg="invalid code lengths set",e.mode=30;break}e.have=0,e.mode=19;case 19:for(;e.have<e.nlen+e.ndist;){for(;lt=(d=e.lencode[O&(1<<e.lenbits)-1])>>>16&255,mt=65535&d,!((st=d>>>24)<=A);){if(Z===0)break t;Z--,O+=V[L++]<<A,A+=8}if(mt<16)O>>>=st,A-=st,e.lens[e.have++]=mt;else{if(mt===16){for(f=st+2;A<f;){if(Z===0)break t;Z--,O+=V[L++]<<A,A+=8}if(O>>>=st,A-=st,e.have===0){w.msg="invalid bit length repeat",e.mode=30;break}t=e.lens[e.have-1],Y=3+(3&O),O>>>=2,A-=2}else if(mt===17){for(f=st+3;A<f;){if(Z===0)break t;Z--,O+=V[L++]<<A,A+=8}A-=st,t=0,Y=3+(7&(O>>>=st)),O>>>=3,A-=3}else{for(f=st+7;A<f;){if(Z===0)break t;Z--,O+=V[L++]<<A,A+=8}A-=st,t=0,Y=11+(127&(O>>>=st)),O>>>=7,A-=7}if(e.have+Y>e.nlen+e.ndist){w.msg="invalid bit length repeat",e.mode=30;break}for(;Y--;)e.lens[e.have++]=t}}if(e.mode===30)break;if(e.lens[256]===0){w.msg="invalid code -- missing end-of-block",e.mode=30;break}if(e.lenbits=9,I={bits:e.lenbits},T=_(v,e.lens,0,e.nlen,e.lencode,0,e.work,I),e.lenbits=I.bits,T){w.msg="invalid literal/lengths set",e.mode=30;break}if(e.distbits=6,e.distcode=e.distdyn,I={bits:e.distbits},T=_(g,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,I),e.distbits=I.bits,T){w.msg="invalid distances set",e.mode=30;break}if(e.mode=20,R===6)break t;case 20:e.mode=21;case 21:if(6<=Z&&258<=et){w.next_out=rt,w.avail_out=et,w.next_in=L,w.avail_in=Z,e.hold=O,e.bits=A,l(w,q),rt=w.next_out,nt=w.output,et=w.avail_out,L=w.next_in,V=w.input,Z=w.avail_in,O=e.hold,A=e.bits,e.mode===12&&(e.back=-1);break}for(e.back=0;lt=(d=e.lencode[O&(1<<e.lenbits)-1])>>>16&255,mt=65535&d,!((st=d>>>24)<=A);){if(Z===0)break t;Z--,O+=V[L++]<<A,A+=8}if(lt&&(240&lt)==0){for(ut=st,kt=lt,wt=mt;lt=(d=e.lencode[wt+((O&(1<<ut+kt)-1)>>ut)])>>>16&255,mt=65535&d,!(ut+(st=d>>>24)<=A);){if(Z===0)break t;Z--,O+=V[L++]<<A,A+=8}O>>>=ut,A-=ut,e.back+=ut}if(O>>>=st,A-=st,e.back+=st,e.length=mt,lt===0){e.mode=26;break}if(32&lt){e.back=-1,e.mode=12;break}if(64&lt){w.msg="invalid literal/length code",e.mode=30;break}e.extra=15&lt,e.mode=22;case 22:if(e.extra){for(f=e.extra;A<f;){if(Z===0)break t;Z--,O+=V[L++]<<A,A+=8}e.length+=O&(1<<e.extra)-1,O>>>=e.extra,A-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=23;case 23:for(;lt=(d=e.distcode[O&(1<<e.distbits)-1])>>>16&255,mt=65535&d,!((st=d>>>24)<=A);){if(Z===0)break t;Z--,O+=V[L++]<<A,A+=8}if((240&lt)==0){for(ut=st,kt=lt,wt=mt;lt=(d=e.distcode[wt+((O&(1<<ut+kt)-1)>>ut)])>>>16&255,mt=65535&d,!(ut+(st=d>>>24)<=A);){if(Z===0)break t;Z--,O+=V[L++]<<A,A+=8}O>>>=ut,A-=ut,e.back+=ut}if(O>>>=st,A-=st,e.back+=st,64&lt){w.msg="invalid distance code",e.mode=30;break}e.offset=mt,e.extra=15&lt,e.mode=24;case 24:if(e.extra){for(f=e.extra;A<f;){if(Z===0)break t;Z--,O+=V[L++]<<A,A+=8}e.offset+=O&(1<<e.extra)-1,O>>>=e.extra,A-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){w.msg="invalid distance too far back",e.mode=30;break}e.mode=25;case 25:if(et===0)break t;if(Y=q-et,e.offset>Y){if((Y=e.offset-Y)>e.whave&&e.sane){w.msg="invalid distance too far back",e.mode=30;break}ht=Y>e.wnext?(Y-=e.wnext,e.wsize-Y):e.wnext-Y,Y>e.length&&(Y=e.length),gt=e.window}else gt=nt,ht=rt-e.offset,Y=e.length;for(et<Y&&(Y=et),et-=Y,e.length-=Y;nt[rt++]=gt[ht++],--Y;);e.length===0&&(e.mode=21);break;case 26:if(et===0)break t;nt[rt++]=e.length,et--,e.mode=21;break;case 27:if(e.wrap){for(;A<32;){if(Z===0)break t;Z--,O|=V[L++]<<A,A+=8}if(q-=et,w.total_out+=q,e.total+=q,q&&(w.adler=e.check=e.flags?n(e.check,nt,q,rt-q):o(e.check,nt,q,rt-q)),q=et,(e.flags?O:c(O))!==e.check){w.msg="incorrect data check",e.mode=30;break}A=O=0}e.mode=28;case 28:if(e.wrap&&e.flags){for(;A<32;){if(Z===0)break t;Z--,O+=V[L++]<<A,A+=8}if(O!==(4294967295&e.total)){w.msg="incorrect length check",e.mode=30;break}A=O=0}e.mode=29;case 29:T=1;break t;case 30:T=-3;break t;case 31:return-4;case 32:default:return a}return w.next_out=rt,w.avail_out=et,w.next_in=L,w.avail_in=Z,e.hold=O,e.bits=A,(e.wsize||q!==w.avail_out&&e.mode<30&&(e.mode<27||R!==4))&&tt(w,w.output,w.next_out,q-w.avail_out)?(e.mode=31,-4):(Q-=w.avail_in,q-=w.avail_out,w.total_in+=Q,w.total_out+=q,e.total+=q,e.wrap&&q&&(w.adler=e.check=e.flags?n(e.check,nt,q,w.next_out-q):o(e.check,nt,q,w.next_out-q)),w.data_type=e.bits+(e.last?64:0)+(e.mode===12?128:0)+(e.mode===20||e.mode===15?256:0),(Q==0&&q===0||R===4)&&T===y&&(T=-5),T)},h.inflateEnd=function(w){if(!w||!w.state)return a;var R=w.state;return R.window&&(R.window=null),w.state=null,y},h.inflateGetHeader=function(w,R){var e;return w&&w.state?(2&(e=w.state).wrap)==0?a:((e.head=R).done=!1,y):a},h.inflateSetDictionary=function(w,R){var e,V=R.length;return w&&w.state?(e=w.state).wrap!==0&&e.mode!==11?a:e.mode===11&&o(1,R,V,0)!==e.check?-3:tt(w,R,V,V)?(e.mode=31,-4):(e.havedict=1,y):a},h.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(i,E,h){var r=i("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],n=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],_=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];E.exports=function(v,g,y,a,m,s,u,c){var p,S,k,D,P,B,j,$,G,tt=c.bits,w=0,R=0,e=0,V=0,nt=0,L=0,rt=0,Z=0,et=0,O=0,A=null,Q=0,q=new r.Buf16(16),Y=new r.Buf16(16),ht=null,gt=0;for(w=0;w<=15;w++)q[w]=0;for(R=0;R<a;R++)q[g[y+R]]++;for(nt=tt,V=15;1<=V&&q[V]===0;V--);if(V<nt&&(nt=V),V===0)return m[s++]=20971520,m[s++]=20971520,c.bits=1,0;for(e=1;e<V&&q[e]===0;e++);for(nt<e&&(nt=e),w=Z=1;w<=15;w++)if(Z<<=1,(Z-=q[w])<0)return-1;if(0<Z&&(v===0||V!==1))return-1;for(Y[1]=0,w=1;w<15;w++)Y[w+1]=Y[w]+q[w];for(R=0;R<a;R++)g[y+R]!==0&&(u[Y[g[y+R]]++]=R);if(B=v===0?(A=ht=u,19):v===1?(A=o,Q-=257,ht=n,gt-=257,256):(A=l,ht=_,-1),w=e,P=s,rt=R=O=0,k=-1,D=(et=1<<(L=nt))-1,v===1&&852<et||v===2&&592<et)return 1;for(;;){for(j=w-rt,G=u[R]<B?($=0,u[R]):u[R]>B?($=ht[gt+u[R]],A[Q+u[R]]):($=96,0),p=1<<w-rt,e=S=1<<L;m[P+(O>>rt)+(S-=p)]=j<<24|$<<16|G|0,S!==0;);for(p=1<<w-1;O&p;)p>>=1;if(p!==0?(O&=p-1,O+=p):O=0,R++,--q[w]==0){if(w===V)break;w=g[y+u[R]]}if(nt<w&&(O&D)!==k){for(rt===0&&(rt=nt),P+=e,Z=1<<(L=w-rt);L+rt<V&&!((Z-=q[L+rt])<=0);)L++,Z<<=1;if(et+=1<<L,v===1&&852<et||v===2&&592<et)return 1;m[k=O&D]=nt<<24|L<<16|P-s|0}}return O!==0&&(m[P+O]=w-rt<<24|64<<16|0),c.bits=nt,0}},{"../utils/common":41}],51:[function(i,E,h){E.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(i,E,h){var r=i("../utils/common"),o=0,n=1;function l(d){for(var x=d.length;0<=--x;)d[x]=0}var _=0,v=29,g=256,y=g+1+v,a=30,m=19,s=2*y+1,u=15,c=16,p=7,S=256,k=16,D=17,P=18,B=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],j=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],$=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],tt=new Array(2*(y+2));l(tt);var w=new Array(2*a);l(w);var R=new Array(512);l(R);var e=new Array(256);l(e);var V=new Array(v);l(V);var nt,L,rt,Z=new Array(a);function et(d,x,U,N,z){this.static_tree=d,this.extra_bits=x,this.extra_base=U,this.elems=N,this.max_length=z,this.has_stree=d&&d.length}function O(d,x){this.dyn_tree=d,this.max_code=0,this.stat_desc=x}function A(d){return d<256?R[d]:R[256+(d>>>7)]}function Q(d,x){d.pending_buf[d.pending++]=255&x,d.pending_buf[d.pending++]=x>>>8&255}function q(d,x,U){d.bi_valid>c-U?(d.bi_buf|=x<<d.bi_valid&65535,Q(d,d.bi_buf),d.bi_buf=x>>c-d.bi_valid,d.bi_valid+=U-c):(d.bi_buf|=x<<d.bi_valid&65535,d.bi_valid+=U)}function Y(d,x,U){q(d,U[2*x],U[2*x+1])}function ht(d,x){for(var U=0;U|=1&d,d>>>=1,U<<=1,0<--x;);return U>>>1}function gt(d,x,U){var N,z,M=new Array(u+1),X=0;for(N=1;N<=u;N++)M[N]=X=X+U[N-1]<<1;for(z=0;z<=x;z++){var K=d[2*z+1];K!==0&&(d[2*z]=ht(M[K]++,K))}}function st(d){var x;for(x=0;x<y;x++)d.dyn_ltree[2*x]=0;for(x=0;x<a;x++)d.dyn_dtree[2*x]=0;for(x=0;x<m;x++)d.bl_tree[2*x]=0;d.dyn_ltree[2*S]=1,d.opt_len=d.static_len=0,d.last_lit=d.matches=0}function lt(d){8<d.bi_valid?Q(d,d.bi_buf):0<d.bi_valid&&(d.pending_buf[d.pending++]=d.bi_buf),d.bi_buf=0,d.bi_valid=0}function mt(d,x,U,N){var z=2*x,M=2*U;return d[z]<d[M]||d[z]===d[M]&&N[x]<=N[U]}function ut(d,x,U){for(var N=d.heap[U],z=U<<1;z<=d.heap_len&&(z<d.heap_len&&mt(x,d.heap[z+1],d.heap[z],d.depth)&&z++,!mt(x,N,d.heap[z],d.depth));)d.heap[U]=d.heap[z],U=z,z<<=1;d.heap[U]=N}function kt(d,x,U){var N,z,M,X,K=0;if(d.last_lit!==0)for(;N=d.pending_buf[d.d_buf+2*K]<<8|d.pending_buf[d.d_buf+2*K+1],z=d.pending_buf[d.l_buf+K],K++,N===0?Y(d,z,x):(Y(d,(M=e[z])+g+1,x),(X=B[M])!==0&&q(d,z-=V[M],X),Y(d,M=A(--N),U),(X=j[M])!==0&&q(d,N-=Z[M],X)),K<d.last_lit;);Y(d,S,x)}function wt(d,x){var U,N,z,M=x.dyn_tree,X=x.stat_desc.static_tree,K=x.stat_desc.has_stree,J=x.stat_desc.elems,ct=-1;for(d.heap_len=0,d.heap_max=s,U=0;U<J;U++)M[2*U]!==0?(d.heap[++d.heap_len]=ct=U,d.depth[U]=0):M[2*U+1]=0;for(;d.heap_len<2;)M[2*(z=d.heap[++d.heap_len]=ct<2?++ct:0)]=1,d.depth[z]=0,d.opt_len--,K&&(d.static_len-=X[2*z+1]);for(x.max_code=ct,U=d.heap_len>>1;1<=U;U--)ut(d,M,U);for(z=J;U=d.heap[1],d.heap[1]=d.heap[d.heap_len--],ut(d,M,1),N=d.heap[1],d.heap[--d.heap_max]=U,d.heap[--d.heap_max]=N,M[2*z]=M[2*U]+M[2*N],d.depth[z]=(d.depth[U]>=d.depth[N]?d.depth[U]:d.depth[N])+1,M[2*U+1]=M[2*N+1]=z,d.heap[1]=z++,ut(d,M,1),2<=d.heap_len;);d.heap[--d.heap_max]=d.heap[1],function(at,vt){var zt,St,At,ft,It,Tt,Ct=vt.dyn_tree,Nt=vt.max_code,Yt=vt.stat_desc.static_tree,qt=vt.stat_desc.has_stree,Xt=vt.stat_desc.extra_bits,Lt=vt.stat_desc.extra_base,Et=vt.stat_desc.max_length,Ft=0;for(ft=0;ft<=u;ft++)at.bl_count[ft]=0;for(Ct[2*at.heap[at.heap_max]+1]=0,zt=at.heap_max+1;zt<s;zt++)Et<(ft=Ct[2*Ct[2*(St=at.heap[zt])+1]+1]+1)&&(ft=Et,Ft++),Ct[2*St+1]=ft,Nt<St||(at.bl_count[ft]++,It=0,Lt<=St&&(It=Xt[St-Lt]),Tt=Ct[2*St],at.opt_len+=Tt*(ft+It),qt&&(at.static_len+=Tt*(Yt[2*St+1]+It)));if(Ft!==0){do{for(ft=Et-1;at.bl_count[ft]===0;)ft--;at.bl_count[ft]--,at.bl_count[ft+1]+=2,at.bl_count[Et]--,Ft-=2}while(0<Ft);for(ft=Et;ft!==0;ft--)for(St=at.bl_count[ft];St!==0;)Nt<(At=at.heap[--zt])||(Ct[2*At+1]!==ft&&(at.opt_len+=(ft-Ct[2*At+1])*Ct[2*At],Ct[2*At+1]=ft),St--)}}(d,x),gt(M,ct,d.bl_count)}function t(d,x,U){var N,z,M=-1,X=x[1],K=0,J=7,ct=4;for(X===0&&(J=138,ct=3),x[2*(U+1)+1]=65535,N=0;N<=U;N++)z=X,X=x[2*(N+1)+1],++K<J&&z===X||(K<ct?d.bl_tree[2*z]+=K:z!==0?(z!==M&&d.bl_tree[2*z]++,d.bl_tree[2*k]++):K<=10?d.bl_tree[2*D]++:d.bl_tree[2*P]++,M=z,ct=(K=0)===X?(J=138,3):z===X?(J=6,3):(J=7,4))}function T(d,x,U){var N,z,M=-1,X=x[1],K=0,J=7,ct=4;for(X===0&&(J=138,ct=3),N=0;N<=U;N++)if(z=X,X=x[2*(N+1)+1],!(++K<J&&z===X)){if(K<ct)for(;Y(d,z,d.bl_tree),--K!=0;);else z!==0?(z!==M&&(Y(d,z,d.bl_tree),K--),Y(d,k,d.bl_tree),q(d,K-3,2)):K<=10?(Y(d,D,d.bl_tree),q(d,K-3,3)):(Y(d,P,d.bl_tree),q(d,K-11,7));M=z,ct=(K=0)===X?(J=138,3):z===X?(J=6,3):(J=7,4)}}l(Z);var I=!1;function f(d,x,U,N){q(d,(_<<1)+(N?1:0),3),function(z,M,X,K){lt(z),K&&(Q(z,X),Q(z,~X)),r.arraySet(z.pending_buf,z.window,M,X,z.pending),z.pending+=X}(d,x,U,!0)}h._tr_init=function(d){I||(function(){var x,U,N,z,M,X=new Array(u+1);for(z=N=0;z<v-1;z++)for(V[z]=N,x=0;x<1<<B[z];x++)e[N++]=z;for(e[N-1]=z,z=M=0;z<16;z++)for(Z[z]=M,x=0;x<1<<j[z];x++)R[M++]=z;for(M>>=7;z<a;z++)for(Z[z]=M<<7,x=0;x<1<<j[z]-7;x++)R[256+M++]=z;for(U=0;U<=u;U++)X[U]=0;for(x=0;x<=143;)tt[2*x+1]=8,x++,X[8]++;for(;x<=255;)tt[2*x+1]=9,x++,X[9]++;for(;x<=279;)tt[2*x+1]=7,x++,X[7]++;for(;x<=287;)tt[2*x+1]=8,x++,X[8]++;for(gt(tt,y+1,X),x=0;x<a;x++)w[2*x+1]=5,w[2*x]=ht(x,5);nt=new et(tt,B,g+1,y,u),L=new et(w,j,0,a,u),rt=new et(new Array(0),$,0,m,p)}(),I=!0),d.l_desc=new O(d.dyn_ltree,nt),d.d_desc=new O(d.dyn_dtree,L),d.bl_desc=new O(d.bl_tree,rt),d.bi_buf=0,d.bi_valid=0,st(d)},h._tr_stored_block=f,h._tr_flush_block=function(d,x,U,N){var z,M,X=0;0<d.level?(d.strm.data_type===2&&(d.strm.data_type=function(K){var J,ct=4093624447;for(J=0;J<=31;J++,ct>>>=1)if(1&ct&&K.dyn_ltree[2*J]!==0)return o;if(K.dyn_ltree[18]!==0||K.dyn_ltree[20]!==0||K.dyn_ltree[26]!==0)return n;for(J=32;J<g;J++)if(K.dyn_ltree[2*J]!==0)return n;return o}(d)),wt(d,d.l_desc),wt(d,d.d_desc),X=function(K){var J;for(t(K,K.dyn_ltree,K.l_desc.max_code),t(K,K.dyn_dtree,K.d_desc.max_code),wt(K,K.bl_desc),J=m-1;3<=J&&K.bl_tree[2*G[J]+1]===0;J--);return K.opt_len+=3*(J+1)+5+5+4,J}(d),z=d.opt_len+3+7>>>3,(M=d.static_len+3+7>>>3)<=z&&(z=M)):z=M=U+5,U+4<=z&&x!==-1?f(d,x,U,N):d.strategy===4||M===z?(q(d,2+(N?1:0),3),kt(d,tt,w)):(q(d,4+(N?1:0),3),function(K,J,ct,at){var vt;for(q(K,J-257,5),q(K,ct-1,5),q(K,at-4,4),vt=0;vt<at;vt++)q(K,K.bl_tree[2*G[vt]+1],3);T(K,K.dyn_ltree,J-1),T(K,K.dyn_dtree,ct-1)}(d,d.l_desc.max_code+1,d.d_desc.max_code+1,X+1),kt(d,d.dyn_ltree,d.dyn_dtree)),st(d),N&&lt(d)},h._tr_tally=function(d,x,U){return d.pending_buf[d.d_buf+2*d.last_lit]=x>>>8&255,d.pending_buf[d.d_buf+2*d.last_lit+1]=255&x,d.pending_buf[d.l_buf+d.last_lit]=255&U,d.last_lit++,x===0?d.dyn_ltree[2*U]++:(d.matches++,x--,d.dyn_ltree[2*(e[U]+g+1)]++,d.dyn_dtree[2*A(x)]++),d.last_lit===d.lit_bufsize-1},h._tr_align=function(d){q(d,2,3),Y(d,S,tt),function(x){x.bi_valid===16?(Q(x,x.bi_buf),x.bi_buf=0,x.bi_valid=0):8<=x.bi_valid&&(x.pending_buf[x.pending++]=255&x.bi_buf,x.bi_buf>>=8,x.bi_valid-=8)}(d)}},{"../utils/common":41}],53:[function(i,E,h){E.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(i,E,h){(function(r){(function(o,n){if(!o.setImmediate){var l,_,v,g,y=1,a={},m=!1,s=o.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(o);u=u&&u.setTimeout?u:o,l={}.toString.call(o.process)==="[object process]"?function(k){process.nextTick(function(){p(k)})}:function(){if(o.postMessage&&!o.importScripts){var k=!0,D=o.onmessage;return o.onmessage=function(){k=!1},o.postMessage("","*"),o.onmessage=D,k}}()?(g="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",S,!1):o.attachEvent("onmessage",S),function(k){o.postMessage(g+k,"*")}):o.MessageChannel?((v=new MessageChannel).port1.onmessage=function(k){p(k.data)},function(k){v.port2.postMessage(k)}):s&&"onreadystatechange"in s.createElement("script")?(_=s.documentElement,function(k){var D=s.createElement("script");D.onreadystatechange=function(){p(k),D.onreadystatechange=null,_.removeChild(D),D=null},_.appendChild(D)}):function(k){setTimeout(p,0,k)},u.setImmediate=function(k){typeof k!="function"&&(k=new Function(""+k));for(var D=new Array(arguments.length-1),P=0;P<D.length;P++)D[P]=arguments[P+1];var B={callback:k,args:D};return a[y]=B,l(y),y++},u.clearImmediate=c}function c(k){delete a[k]}function p(k){if(m)setTimeout(p,0,k);else{var D=a[k];if(D){m=!0;try{(function(P){var B=P.callback,j=P.args;switch(j.length){case 0:B();break;case 1:B(j[0]);break;case 2:B(j[0],j[1]);break;case 3:B(j[0],j[1],j[2]);break;default:B.apply(n,j)}})(D)}finally{c(k),m=!1}}}}function S(k){k.source===o&&typeof k.data=="string"&&k.data.indexOf(g)===0&&p(+k.data.slice(g.length))}})(typeof self>"u"?r===void 0?this:r:self)}).call(this,typeof $t<"u"?$t:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Kt);const Xe=Kt.exports;const Je={name:"VerifyStep",props:{form:{type:Object}},emits:["on-success","on-close"],components:{RemoteHost:Ut,CodeHighlight:Mt},data(){return{hasInit:!1,host:"",reloadCommandOptions:[],deployForm:{deploy_host:null,keyDeployPath:"",pemDeployPath:"",reloadcmd:""},rules:{deploy_host:[{message:"\u670D\u52A1\u5668\u4E0D\u80FD\u4E3A\u7A7A",required:!0,trigger:"blur"}],keyDeployPath:[{message:"\u79C1\u94A5\u90E8\u7F72\u8DEF\u5F84\u4E0D\u80FD\u4E3A\u7A7A",required:!0,trigger:"blur"}],pemDeployPath:[{message:"\u516C\u94A5\u90E8\u7F72\u8DEF\u5F84\u4E0D\u80FD\u4E3A\u7A7A",required:!0,trigger:"blur"}],reloadcmd:[{message:"\u91CD\u542F\u547D\u4EE4\u4E0D\u80FD\u4E3A\u7A7A",required:!0,trigger:"blur"}]}}},computed:{domain_list(){return this.form.domains.join(" ")},nginxConfig(){return`server {
    listen 443 ssl;
    server_name ${this.domain_list};

    ssl_certificate_key ${this.deployForm.keyDeployPath};
    ssl_certificate ${this.deployForm.pemDeployPath};
}`}},methods:{async getData(){console.log(this.form),this.deployForm.keyDeployPath=this.form.deploy_key_file||`/var/www/ssl/${this.form.domains[0]}.key`,this.deployForm.pemDeployPath=this.form.deploy_fullchain_file||`/var/www/ssl/${this.form.domains[0]}.pem`,this.deployForm.reloadcmd=this.form.deploy_reloadcmd||this.deployForm.reloadcmd,this.deployForm.deploy_host=this.form.deploy_host,this.deployForm.deploy_host||await this.getDomainHost(),this.hasInit=!0,this.getAllowCommands()},async getAllowCommands(){const b=await this.$http.getAllowCommands();b.ok&&(this.reloadCommandOptions=b.data.map(C=>({value:C,label:C})),this.deployForm.reloadcmd||(this.deployForm.reloadcmd=this.reloadCommandOptions[0].value))},async getDomainHost(){let b={domain:this.form.domains[0]};const C=await this.$http.getDomainHost(b);C.code==0?(this.host=C.data.host,this.host&&await this.getHost()):this.$msg.error(C.msg)},async getHost(){let b={host:this.host};const C=await this.$http.getHostList(b);C.data.list&&C.data.list.length>0&&(this.deployForm.deploy_host=C.data.list[0])},handleClose(){this.$emit("on-close")},async handleSubmit(){let b=this.$loading({fullscreen:!0}),C={issue_certificate_id:this.form.id};const i=await this.$http.renewCertificate(C);return i.code==0?(this.$msg.success("\u64CD\u4F5C\u6210\u529F"),this.$emit("on-success")):this.$msg.error(i.msg),this.$nextTick(()=>{b.close()}),i},downloadSSLKeyFile(){console.log(JSON.stringify(this.form,null,2));let b=new Blob([this.form.ssl_certificate_key],{type:"text/plain;charset=utf-8"}),C=this.form.domains[0];xt.saveAs(b,`${C}.key`)},async downloadSSLFile(){let b=this.form.domains[0];const C=new Xe;C.file(`${b}.pem`,this.form.ssl_certificate),C.file(`${b}.key`,this.form.ssl_certificate_key),C.generateAsync({type:"blob"}).then(function(i){xt.saveAs(i,`${b}.zip`)})},async handleDeployVerifyFile(b){this.$refs.form.validate(C=>{if(C)this.confirmDeployVerifyFile(b);else return!1})},async confirmDeployVerifyFile(b){let C=this.$loading({fullscreen:!0}),i={issue_certificate_id:this.form.id,host_id:b.id,key_deploy_path:this.deployForm.keyDeployPath,pem_deploy_path:this.deployForm.pemDeployPath,reloadcmd:this.deployForm.reloadcmd};const E=await this.$http.deployCertificateFile(i);E.code==0?(this.$msg.success("\u90E8\u7F72\u6210\u529F"),this.$emit("on-success",E.data)):this.$msg.error(E.msg),this.$nextTick(()=>{C.close()})}},created(){this.getData()}},Qe=b=>(jt("data-v-5948c7ef"),b=b(),Wt(),b),tn={class:"flex"},en={class:"ml-sm text-sm color--info flex items-center"},nn=Qe(()=>it("span",null,"\xA0\u51FA\u4E8E\u5B89\u5168\u8003\u8651\uFF0C\u4EC5\u80FD\u4F7F\u7528\u9884\u8BBE\u7684\u547D\u4EE4",-1)),rn={class:"mo-form-detail"},sn={class:"text-center mt-md"};function an(b,C,i,E,h,r){const o=W("RemoteHost"),n=W("el-form-item"),l=W("el-input"),_=W("el-option"),v=W("el-select"),g=W("Warning"),y=W("el-icon"),a=W("el-form"),m=W("Download"),s=W("el-link"),u=W("CodeHighlight"),c=W("el-button");return ot(),pt("div",null,[F(a,{ref:"form",model:h.deployForm,rules:h.rules,"label-width":"160px"},{default:H(()=>[F(n,{label:b.$t("\u670D\u52A1\u5668\u5730\u5740"),prop:"deploy_host"},{default:H(()=>[h.hasInit?(ot(),bt(o,{key:0,defaultKeyword:h.host,modelValue:h.deployForm.deploy_host,"onUpdate:modelValue":C[0]||(C[0]=p=>h.deployForm.deploy_host=p),onOnConfirm:r.handleDeployVerifyFile},null,8,["defaultKeyword","modelValue","onOnConfirm"])):Dt("",!0)]),_:1},8,["label"]),F(n,{label:b.$t("\u79C1\u94A5\u90E8\u7F72\u8DEF\u5F84"),prop:"keyDeployPath"},{default:H(()=>[F(l,{modelValue:h.deployForm.keyDeployPath,"onUpdate:modelValue":C[1]||(C[1]=p=>h.deployForm.keyDeployPath=p)},null,8,["modelValue"])]),_:1},8,["label"]),F(n,{label:b.$t("\u516C\u94A5\u90E8\u7F72\u8DEF\u5F84"),prop:"pemDeployPath"},{default:H(()=>[F(l,{modelValue:h.deployForm.pemDeployPath,"onUpdate:modelValue":C[2]||(C[2]=p=>h.deployForm.pemDeployPath=p)},null,8,["modelValue"])]),_:1},8,["label"]),F(n,{label:b.$t("\u91CD\u542F\u547D\u4EE4"),prop:"reloadcmd"},{default:H(()=>[it("div",tn,[F(v,{style:{width:"300px"},modelValue:h.deployForm.reloadcmd,"onUpdate:modelValue":C[3]||(C[3]=p=>h.deployForm.reloadcmd=p),placeholder:b.$t("\u91CD\u542F\u547D\u4EE4")},{default:H(()=>[(ot(!0),pt(Ot,null,Vt(h.reloadCommandOptions,p=>(ot(),bt(_,{key:p.value,label:p.label,value:p.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),it("div",en,[F(y,null,{default:H(()=>[F(g)]),_:1}),nn])])]),_:1},8,["label"])]),_:1},8,["model","rules"]),it("div",rn,[F(a,{"label-width":"130px"},{default:H(()=>[F(n,{label:b.$t("SSL\u8BC1\u4E66"),prop:"domain"},{default:H(()=>[F(s,{underline:!1,type:"primary",class:"mr-sm",onClick:r.downloadSSLFile},{default:H(()=>[F(y,null,{default:H(()=>[F(m)]),_:1}),_t(dt(b.$t("\u70B9\u51FB\u4E0B\u8F7D"))+"\uFF08.zip\uFF09",1)]),_:1},8,["onClick"])]),_:1},8,["label"]),F(n,{label:b.$t("Nginx\u914D\u7F6E"),prop:"domain"},{default:H(()=>[F(u,{value:r.nginxConfig},null,8,["value"])]),_:1},8,["label"])]),_:1}),it("div",sn,[F(c,{onClick:r.handleClose},{default:H(()=>[_t(dt(b.$t("\u5173\u95ED")),1)]),_:1},8,["onClick"])])])])}const on=yt(Je,[["render",an],["__scopeId","data-v-5948c7ef"]]),ln={name:"IssueCertificateStep",props:{row:{type:Object},defaultActiveStep:{type:Number,default:0}},components:{DataForm:Ht,VerifyStep:Me,RenewStep:qe,DownloadStep:on},data(){return{host:"",hasInit:!1,activeStep:0,issue_certificate_id:null,form:{id:null,domains:[],validation:"",token:"",status:"",ssl_certificate_key:"",ssl_certificate:"",deploy_key_file:"",deploy_fullchain_file:"",deploy_reloadcmd:"",deploy_host:null},setpList:[{title:this.$t("\u586B\u5199\u57DF\u540D")},{title:this.$t("\u9A8C\u8BC1\u57DF\u540D")},{title:this.$t("\u4E0B\u8F7D\u8BC1\u4E66")}]}},computed:{},methods:{async getData(){if(!this.issue_certificate_id)return;let b={issue_certificate_id:this.issue_certificate_id};const C=await this.$http.getIssueCertificateById(b);if(!!C.ok){for(let i in this.form)this.form[i]=C.data[i];this.activeStep=this.defaultActiveStep,C.data.ssl_certificate?this.activeStep=2:C.data.status=="valid"?this.activeStep=2:C.data.id?this.activeStep=1:this.activeStep=0}},handleIssueSuccess(b){this.issue_certificate_id=b.id,this.getData()},handleVerifySuccess(){this.getData()}},created(){this.row&&(this.issue_certificate_id=this.row.id),this.getData()}},cn={class:""},dn={class:"mt-md"};function hn(b,C,i,E,h,r){const o=W("el-step"),n=W("el-steps"),l=W("DataForm"),_=W("VerifyStep"),v=W("DownloadStep");return ot(),pt("div",cn,[F(n,{active:h.activeStep,"align-center":"","finish-status":"success"},{default:H(()=>[(ot(!0),pt(Ot,null,Vt(h.setpList,g=>(ot(),bt(o,{title:g.title},null,8,["title"]))),256))]),_:1},8,["active"]),it("div",dn,[h.activeStep==0?(ot(),bt(l,{key:0,onOnSuccess:r.handleIssueSuccess,onOnCancel:C[0]||(C[0]=g=>b.$emit("on-cancel"))},null,8,["onOnSuccess"])):h.activeStep==1?(ot(),bt(_,{key:1,form:h.form,onOnSuccess:r.handleVerifySuccess},null,8,["form","onOnSuccess"])):h.activeStep==2?(ot(),bt(v,{key:2,form:h.form,onOnClose:C[1]||(C[1]=g=>b.$emit("on-cancel"))},null,8,["form"])):Dt("",!0)])])}const un=yt(ln,[["render",hn]]),fn={name:"",props:{row:{type:Object,default:null},visible:{type:Boolean,default:!1}},emits:["update:visible"],components:{DataForm:Ht,IssueCertificateStep:un},data(){return{}},computed:{dialogTitle(){return this.row?"\u7F16\u8F91":this.$t("\u7533\u8BF7SSL\u8BC1\u4E66")},dialogVisible:{get(){return this.visible},set(b){this.$emit("update:visible",b)}}},methods:{handleClose(){this.$emit("update:visible",!1)},handleOpen(){this.$emit("update:visible",!0)},handleSuccess(){this.handleClose(),this.$emit("on-success")},handleDialogClose(){this.$emit("on-close")}},created(){}};function pn(b,C,i,E,h,r){const o=W("IssueCertificateStep"),n=W("el-dialog");return ot(),bt(n,{title:b.$t("\u7533\u8BF7SSL\u8BC1\u4E66"),modelValue:r.dialogVisible,"onUpdate:modelValue":C[0]||(C[0]=l=>r.dialogVisible=l),width:"90%",center:"",top:"20px","append-to-body":"",onClose:r.handleDialogClose},{default:H(()=>[r.dialogVisible?(ot(),bt(o,{key:0,row:i.row,onOnCancel:r.handleClose,onOnSuccess:r.handleSuccess},null,8,["row","onOnCancel","onOnSuccess"])):Dt("",!0)]),_:1},8,["title","modelValue","onClose"])}const Gt=yt(fn,[["render",pn]]),mn={name:"",props:{row:{type:Object,default:null}},components:{},data(){return{rules:{},form:{ssl_certificate:"",ssl_certificate_key:""}}},computed:{},methods:{async getData(){let b={issue_certificate_id:this.row.id};const C=await this.$http.getIssueCertificateById(b);if(C.ok)for(let i in this.form)this.form[i]=C.data[i]},handleCancel(){this.$emit("on-cancel")},handleSubmit(){this.$refs.form.validate(b=>{if(b)this.confirmSubmit();else return!1})},async confirmSubmit(){let b=this.$loading({fullscreen:!0}),C={domains:this.form.domains.split(`
`)};this.row&&(C.id=this.row.id);const i=await this.$http.issueCertificate(C);i.code==0?(this.$msg.success("\u64CD\u4F5C\u6210\u529F"),this.$emit("on-success",i.data)):this.$msg.error(i.msg),this.$nextTick(()=>{b.close()})}},created(){this.getData()}},_n={class:"text-center"};function gn(b,C,i,E,h,r){const o=W("el-input"),n=W("el-form-item"),l=W("el-form"),_=W("el-button");return ot(),pt("div",null,[F(l,{ref:"form",model:h.form,rules:h.rules,"label-width":"100px"},{default:H(()=>[F(n,{label:"id",prop:"id",style:{display:"none"}},{default:H(()=>[F(o,{type:"text",modelValue:h.form.id,"onUpdate:modelValue":C[0]||(C[0]=v=>h.form.id=v),placeholder:"id"},null,8,["modelValue"])]),_:1}),F(n,{label:"\u8BC1\u4E66\u6587\u4EF6",prop:"domains"},{default:H(()=>[F(o,{type:"textarea",modelValue:h.form.ssl_certificate,"onUpdate:modelValue":C[1]||(C[1]=v=>h.form.ssl_certificate=v),rows:10,spellcheck:!1,placeholder:"\u8BF7\u8F93\u5165\u57DF\u540D\u5217\u8868\uFF0C\u6BCF\u884C\u4E00\u4E2A"},null,8,["modelValue"])]),_:1}),F(n,{label:"\u8BC1\u4E66\u79C1\u94A5",prop:"domains"},{default:H(()=>[F(o,{type:"textarea",modelValue:h.form.ssl_certificate_key,"onUpdate:modelValue":C[2]||(C[2]=v=>h.form.ssl_certificate_key=v),rows:10,spellcheck:!1,placeholder:"\u8BF7\u8F93\u5165\u57DF\u540D\u5217\u8868\uFF0C\u6BCF\u884C\u4E00\u4E2A"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),it("div",_n,[F(_,{onClick:r.handleCancel},{default:H(()=>[_t("\u5173 \u95ED")]),_:1},8,["onClick"])])])}const yn=yt(mn,[["render",gn]]),bn={name:"",props:{row:{type:Object,default:null},visible:{type:Boolean,default:!1}},emits:["update:visible"],components:{DataForm:yn},data(){return{}},computed:{dialogTitle(){return this.row?"\u7F16\u8F91":this.$t("\u7533\u8BF7SSL\u8BC1\u4E66")},dialogVisible:{get(){return this.visible},set(b){this.$emit("update:visible",b)}}},methods:{handleClose(){this.$emit("update:visible",!1)},handleOpen(){this.$emit("update:visible",!0)},handleSuccess(){this.handleClose(),this.$emit("on-success")},handleDialogClose(){this.$emit("on-close")}},created(){}};function vn(b,C,i,E,h,r){const o=W("DataForm"),n=W("el-dialog");return ot(),bt(n,{title:"SSL\u8BC1\u4E66",modelValue:r.dialogVisible,"onUpdate:modelValue":C[0]||(C[0]=l=>r.dialogVisible=l),width:"800px",center:"",top:"20px","append-to-body":"",onClose:r.handleDialogClose},{default:H(()=>[r.dialogVisible?(ot(),bt(o,{key:0,row:i.row,onOnCancel:r.handleClose,onOnSuccess:r.handleSuccess},null,8,["row","onOnCancel","onOnSuccess"])):Dt("",!0)]),_:1},8,["modelValue","onClose"])}const wn=yt(bn,[["render",vn]]),kn={name:"",components:{DataFormDialog:Gt,ConnectStatus:Pt,ExpireProgress:re,CertificateDetailDialog:wn},props:{list:{type:Array}},emits:["on-close","on-success","selection-change"],computed:{},data(){return{currentRow:null,dialogVisible:!1,CertificateDetailDialogVisible:!1}},methods:{handleEditRow(b){this.currentRow=b,this.dialogVisible=!0},handleOpenDetail(b){this.currentRow=b,this.CertificateDetailDialogVisible=!0},async handleDeleteClick(b){let C={issue_certificate_id:b.id};const i=await this.$http.deleteCertificateById(C);i.code==0?(this.$msg.success("\u64CD\u4F5C\u6210\u529F"),this.$emit("on-success")):this.$msg.error(i.msg)},async handleStatusChange(b){let C={id:b.id};const i=await this.$http.function(C);i.code==0?(this.$msg.success("\u64CD\u4F5C\u6210\u529F"),this.$emit("on-success")):this.$msg.error(i.msg)},async handleRenewIssueCertificateById(b){let C=this.$loading({fullscreen:!0}),i={issue_certificate_id:b.id};const E=await this.$http.renewIssueCertificateById(i);E.code==0?(this.$msg.success("\u64CD\u4F5C\u6210\u529F"),this.$emit("on-success")):this.$msg.error(E.msg),this.$nextTick(()=>{C.close()})},handleUpdateSuccess(){this.$emit("on-success")}},created(){}},Sn={style:{"margin-left":"4px"}},Cn={class:"inline-flex items-center"},xn={class:"mr-[2px]"};function Dn(b,C,i,E,h,r){const o=W("el-table-column"),n=W("ExpireProgress"),l=W("ConnectStatus"),_=W("el-link"),v=W("Warning"),g=W("el-icon"),y=W("el-tooltip"),a=W("Tickets"),m=W("Refresh"),s=W("el-popconfirm"),u=W("Delete"),c=W("el-table"),p=W("DataFormDialog"),S=W("CertificateDetailDialog");return ot(),pt("div",null,[F(c,{data:i.list,stripe:"",border:"",onSelectionChange:C[0]||(C[0]=k=>b.$emit("selection-change",k))},{default:H(()=>[F(o,{type:"selection","header-align":"center",align:"center",width:"40"}),F(o,{label:b.$t("\u57DF\u540D"),"header-align":"center",align:"center",prop:"domains"},{default:H(k=>[(ot(!0),pt(Ot,null,Vt(k.row.domains,D=>(ot(),pt("div",null,dt(D),1))),256))]),_:1},8,["label"]),F(o,{label:b.$t("SSL\u7B7E\u53D1\u65F6\u95F4"),"header-align":"center",align:"center",prop:"start_date",width:"120"},{default:H(k=>[it("span",null,dt(k.row.start_date||"-"),1)]),_:1},8,["label"]),F(o,{label:b.$t("SSL\u8FC7\u671F\u65F6\u95F4"),"header-align":"center",align:"center",prop:"expire_date",width:"120"},{default:H(k=>[it("span",null,dt(k.row.expire_date||"-"),1)]),_:1},8,["label"]),F(o,{label:b.$t("\u8BC1\u4E66\u5929\u6570"),"header-align":"center",align:"center",width:"110",sortable:"custom",prop:"expire_days"},{default:H(k=>[F(n,{startTime:k.row.start_time,endTime:k.row.expire_time},null,8,["startTime","endTime"])]),_:1},8,["label"]),F(o,{label:b.$t("\u72B6\u6001"),"header-align":"center",align:"center",prop:"status",width:"120"},{default:H(k=>[F(l,{value:k.row.show_status,onOnClick:D=>r.handleEditRow(k.row)},null,8,["value","onOnClick"]),F(_,{underline:!1,type:"primary",onClick:D=>r.handleEditRow(k.row)},{default:H(()=>[it("span",Sn,dt(k.row.status_label||"-"),1)]),_:2},1032,["onClick"])]),_:1},8,["label"]),F(o,{label:b.$t("\u66F4\u65B0\u65F6\u95F4"),"header-align":"center",align:"center",width:"120",prop:"update_time_label"},{default:H(k=>[it("span",null,dt(k.row.update_time_label||"-"),1)]),_:1},8,["label"]),F(o,{label:b.$t("\u81EA\u52A8\u7EED\u671F"),width:"120","header-align":"center",align:"center"},{header:H(()=>[F(y,{effect:"dark",content:"\u81EA\u52A8\u9A8C\u8BC1\u548C\u81EA\u52A8\u90E8\u7F72\u6210\u529F\u7684\u8BC1\u4E66\u624D\u4F1A\u81EA\u52A8\u7EED\u671F",placement:"top-start","show-after":800},{default:H(()=>[it("div",Cn,[it("span",xn,dt(b.$t("\u81EA\u52A8\u7EED\u671F")),1),F(g,null,{default:H(()=>[F(v)]),_:1})])]),_:1})]),default:H(k=>[_t(dt(k.row.is_auto_renew?b.$t("\u662F"):b.$t("\u5426")),1)]),_:1},8,["label"]),F(o,{label:b.$t("\u67E5\u770B"),width:"60","header-align":"center",align:"center"},{default:H(k=>[F(_,{underline:!1,type:"primary",disabled:!k.row.has_ssl_certificate,onClick:D=>r.handleOpenDetail(k.row)},{default:H(()=>[F(g,null,{default:H(()=>[F(a)]),_:1})]),_:2},1032,["disabled","onClick"])]),_:1},8,["label"]),F(o,{label:b.$t("\u7EED\u671F"),width:"70",align:"center",prop:"tag"},{default:H(k=>[F(s,{title:"\u786E\u5B9A\u7EED\u671F\uFF1F",onConfirm:D=>r.handleRenewIssueCertificateById(k.row)},{reference:H(()=>[F(_,{underline:!1,type:"primary",disabled:!k.row.is_auto_renew},{default:H(()=>[F(g,null,{default:H(()=>[F(m)]),_:1})]),_:2},1032,["disabled"])]),_:2},1032,["onConfirm"])]),_:1},8,["label"]),F(o,{label:b.$t("\u5220\u9664"),width:"60",align:"center",prop:"tag"},{default:H(k=>[F(s,{title:`${b.$t("\u786E\u5B9A\u5220\u9664")}\uFF1F`,onConfirm:D=>r.handleDeleteClick(k.row)},{reference:H(()=>[F(_,{underline:!1,type:"danger"},{default:H(()=>[F(g,null,{default:H(()=>[F(u)]),_:1})]),_:1})]),_:2},1032,["title","onConfirm"])]),_:1},8,["label"])]),_:1},8,["data"]),F(p,{visible:h.dialogVisible,"onUpdate:visible":C[1]||(C[1]=k=>h.dialogVisible=k),row:h.currentRow,defaultActiveStep:1,onOnSuccess:r.handleUpdateSuccess,onOnClose:C[2]||(C[2]=k=>b.$emit("on-close"))},null,8,["visible","row","onOnSuccess"]),F(S,{visible:h.CertificateDetailDialogVisible,"onUpdate:visible":C[3]||(C[3]=k=>h.CertificateDetailDialogVisible=k),row:h.currentRow},null,8,["visible","row"])])}const zn=yt(kn,[["render",Dn]]),An={name:"issue-certificate-list",props:{},components:{DataFormDialog:Gt,DataTable:zn,DataCount:ie},data(){return{list:[],total:0,page:1,size:20,keyword:"",selectedRows:[],loading:!0,dialogVisible:!1}},computed:{showBatchDeleteButton(){return!!(this.selectedRows&&this.selectedRows.length>0)}},methods:{resetData(){this.page=1,this.getData()},async getData(){this.loading=!0;let b={page:this.page,size:this.size,keyword:this.keyword};try{const C=await this.$http.getCertificateList(b);C.code==0&&(this.list=C.data.list.map(i=>(i.status=="pending"?(i.show_status=null,i.status_label=this.$t("\u672A\u9A8C\u8BC1")):i.status=="valid"?(i.show_status=!0,i.status_label=this.$t("\u5DF2\u9A8C\u8BC1")):(i.show_status=!1,i.status_label=this.$t("\u672A\u77E5")),i)),this.total=C.data.total)}catch(C){console.log(C)}finally{this.loading=!1}},handleAddRow(){this.dialogVisible=!0},handleAddSuccess(){this.resetData()},handleSearch(){this.resetData()},handleSelectionChange(b){this.selectedRows=b},async handleBatchDeleteConfirm(){let b=this.$loading({fullscreen:!0}),C={ids:this.selectedRows.map(i=>i.id)};try{const i=await this.$http.deleteCertificateByBatch(C);i.code==0?(this.$msg.success("\u64CD\u4F5C\u6210\u529F"),this.resetData()):this.$msg.error(i.msg)}catch(i){console.log(i)}finally{this.$nextTick(()=>{b.close()})}},async handleRefreshRow(b){let C={issue_certificate_id:b.id};const i=await this.$http.getIssueCertificateById(C);if(i.ok){let E=this.list.findIndex(h=>h.id==b.id);this.list.splice(E,1,i.data)}},handleHostList(){this.$router.push({name:"host-list"})}},created(){this.getData()}},En={class:"app-container"},On={class:"flex justify-between margin-bottom--20"},In={class:"flex items-center"},Fn={class:"flex justify-between mt-sm items-center"};function $n(b,C,i,E,h,r){const o=W("Plus"),n=W("el-icon"),l=W("el-button"),_=W("Search"),v=W("el-input"),g=W("DataCount"),y=W("Delete"),a=W("el-link"),m=W("el-popconfirm"),s=W("Setting"),u=W("DataTable"),c=W("el-pagination"),p=W("DataFormDialog"),S=Jt("loading");return ot(),pt("div",En,[it("div",On,[it("div",In,[F(l,{type:"primary",onClick:r.handleAddRow},{default:H(()=>[F(n,null,{default:H(()=>[F(o)]),_:1}),_t(dt(b.$t("\u7533\u8BF7")),1)]),_:1},8,["onClick"])]),F(v,{class:"ml-sm",style:{width:"260px"},modelValue:h.keyword,"onUpdate:modelValue":C[0]||(C[0]=k=>h.keyword=k),placeholder:b.$t("\u641C\u7D22\u57DF\u540D"),clearable:"",onKeypress:Qt(r.handleSearch,["enter"]),onClear:r.handleSearch},{append:H(()=>[F(l,{onClick:r.handleSearch},{default:H(()=>[F(n,null,{default:H(()=>[F(_)]),_:1})]),_:1},8,["onClick"])]),_:1},8,["modelValue","placeholder","onKeypress","onClear"])]),it("div",Fn,[F(g,{value:h.total},null,8,["value"]),it("div",null,[r.showBatchDeleteButton?(ot(),bt(m,{key:0,title:"\u786E\u5B9A\u5220\u9664\u9009\u4E2D\uFF1F",onConfirm:r.handleBatchDeleteConfirm},{reference:H(()=>[F(a,{underline:!1,type:"danger",class:"mr-sm"},{default:H(()=>[F(n,null,{default:H(()=>[F(y)]),_:1}),_t("\u6279\u91CF\u5220\u9664")]),_:1})]),_:1},8,["onConfirm"])):Dt("",!0),F(a,{underline:!1,type:"primary",class:"mr-sm",onClick:r.handleHostList},{default:H(()=>[F(n,null,{default:H(()=>[F(s)]),_:1}),_t("\u4E3B\u673A\u5217\u8868")]),_:1},8,["onClick"])])]),te(F(u,{class:"mt-sm",list:h.list,onOnSuccess:r.resetData,onOnClose:r.resetData,onOnEditRow:b.handleEditRow,onSelectionChange:r.handleSelectionChange,onOnRefreshRow:r.handleRefreshRow},null,8,["list","onOnSuccess","onOnClose","onOnEditRow","onSelectionChange","onOnRefreshRow"]),[[S,h.loading]]),F(c,{class:"mt-md justify-center",background:"",layout:"total, prev, pager, next",total:h.total,"page-size":h.size,"onUpdate:pageSize":C[1]||(C[1]=k=>h.size=k),"current-page":h.page,"onUpdate:currentPage":C[2]||(C[2]=k=>h.page=k),onCurrentChange:r.getData},null,8,["total","page-size","current-page","onCurrentChange"]),F(p,{visible:h.dialogVisible,"onUpdate:visible":C[3]||(C[3]=k=>h.dialogVisible=k),onOnSuccess:r.handleAddSuccess,onOnClose:r.resetData},null,8,["visible","onOnSuccess","onOnClose"])])}const Mn=yt(An,[["render",$n]]);export{Mn as default};
